<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>"Mais uma dieta que não funciona?" - Dra. Giovana</title>
    
    <!-- ✅ OTIMIZAÇÕES CRÍTICAS DE PERFORMANCE -->
    <meta http-equiv="Cache-Control" content="public, max-age=31536000">
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//www.facebook.com">
    <link rel="dns-prefetch" href="//cdn.utmify.com.br">
    <link rel="dns-prefetch" href="//connect.facebook.net">
    <link rel="dns-prefetch" href="//www.clarity.ms">
    
    <!-- ✅ FONTS OTIMIZADAS COM DISPLAY SWAP -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        /* ✅ CAMPOS HONEYPOT - INVISÍVEIS */
        .honeypot,
        input[name="website"],
        input[name="email_confirmation"], 
        input[name="company"] {
            position: absolute !important;
            left: -9999px !important;
            top: -9999px !important;
            opacity: 0 !important;
            pointer-events: none !important;
            display: none !important;
            visibility: hidden !important;
            width: 0 !important;
            height: 0 !important;
            border: 0 !important;
            margin: 0 !important;
            padding: 0 !important;
            font-size: 0 !important;
        }

        :root {
            --primary: #2c7a2c;
            --secondary: #4a9f4a;
            --accent: #6cc04a;
            --dark: #0a0a0a;
            --light: #ffffff;
            --gray: #1a1a1a;
            --success: #00ff88;
            --danger: #ff3366;
            --warning: #ffc107;
            --orange: #ff6b35;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: 
                radial-gradient(circle at 20% 80%, rgba(44, 122, 44, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(108, 192, 74, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(74, 159, 74, 0.1) 0%, transparent 50%),
                linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            color: var(--light);
        }

        /* ✅ CONTADOR OTIMIZADO - ANIMAÇÕES SUAVES */
        #activeUsersCounter {
                display: none !important;
            position: fixed;
            top: 80px;
            right: 20px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 255, 136, 0.3);
            border-radius: 50px;
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
            transform: translateX(100%);
            opacity: 0;
            animation: slideInCounter 1s ease-out 2s forwards;
        }

        @keyframes slideInCounter {
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        #activeUsersCounter:hover {
            transform: translateX(0) scale(1.02);
        }

        .active-indicator {
            width: 8px;
            height: 8px;
            background: var(--success);
            border-radius: 50%;
            animation: pulseGreen 2s ease-in-out infinite;
            position: relative;
        }

        .active-indicator::after {
            content: '';
            position: absolute;
            top: -4px;
            left: -4px;
            right: -4px;
            bottom: -4px;
            background: var(--success);
            border-radius: 50%;
            opacity: 0.3;
            animation: pulseGreen 2s ease-in-out infinite 0.5s;
        }

        @keyframes pulseGreen {
            0%, 100% { 
                transform: scale(1); 
                opacity: 1; 
            }
            50% { 
                transform: scale(1.4); 
                opacity: 0.7; 
            }
        }

        .counter-text {
            font-size: 13px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.9);
            letter-spacing: 0.3px;
        }

        .counter-number {
            font-size: 15px;
            font-weight: 800;
            color: var(--success);
            margin: 0 2px;
            transition: all 0.3s ease;
            display: inline-block;
        }

        .counter-number.updating {
            transform: scale(1.2);
            color: #00ff88;
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
        }

        /* ✅ VERSÃO MOBILE DO CONTADOR */
        @media (max-width: 768px) {
            #activeUsersCounter {
                top: 70px;
                right: 12px;
                padding: 10px 16px;
                border-radius: 25px;
                max-width: calc(100vw - 24px);
            }
            
            .counter-text {
                font-size: 12px;
            }
            
            .counter-number {
                font-size: 14px;
            }
            
            #activeUsersCounter:hover {
                transform: translateX(0) scale(1.02);
            }
        }

        .option-card:hover:not(.selected):not([data-processing="true"]) {
            transform: translateY(-4px) scale(1.01) !important;
            border-color: rgba(44, 122, 44, 0.4) !important;
            background: rgba(44, 122, 44, 0.05) !important;
            box-shadow: 0 12px 24px rgba(44, 122, 44, 0.15) !important;
        }

        .option-card[data-processing="true"] {
            pointer-events: none !important;
            opacity: 0.8 !important;
        }

        /* ✅ PARTÍCULAS OTIMIZADAS - REDUZIDAS */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: var(--accent);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
            opacity: 0.3;
            will-change: transform;
        }

        .particle:nth-child(odd) {
            background: var(--primary);
            animation-duration: 8s;
        }

        .particle:nth-child(3n) {
            background: var(--secondary);
            animation-duration: 10s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.3; }
            50% { transform: translateY(-100px) rotate(180deg); opacity: 0.8; }
        }

        .header {
            position: relative;
            z-index: 100;
            padding: 20px 0;
            background: rgba(10, 10, 10, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(44, 122, 44, 0.2);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 24px;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            box-shadow: 0 4px 20px rgba(44, 122, 44, 0.3);
        }

        .trust-indicators {
            display: flex;
            align-items: center;
            gap: 20px;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
        }

        .trust-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
            min-height: calc(100vh - 80px);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 10;
        }

        .landing-card, .quiz-card {
            background: rgba(26, 26, 26, 0.9);
            backdrop-filter: blur(30px);
            border-radius: 32px;
            padding: 50px;
            width: 100%;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(44, 122, 44, 0.2);
            box-shadow: 
                0 32px 64px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            transform: translateY(20px);
            opacity: 0;
            animation: slideInUp 1s ease-out 0.2s forwards;
            text-align: center;
        }

        @keyframes slideInUp {
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .landing-card::before, .quiz-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, var(--primary), var(--accent), var(--secondary));
            border-radius: 32px;
            padding: 2px;
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: xor;
            -webkit-mask-composite: xor;
            opacity: 0.6;
            animation: borderGlow 3s ease-in-out infinite alternate;
        }

        @keyframes borderGlow {
            0% { opacity: 0.3; }
            100% { opacity: 0.8; }
        }

        .warning-badge {
            background: linear-gradient(135deg, var(--danger), #dc3545);
            color: white;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: inline-block;
            margin-bottom: 25px;
            animation: urgentPulse 2s ease-in-out infinite;
            box-shadow: 0 8px 32px rgba(255, 51, 102, 0.4);
        }

        @keyframes urgentPulse {
            0%, 100% { 
                transform: scale(1); 
                box-shadow: 0 8px 32px rgba(255, 51, 102, 0.4);
            }
            50% { 
                transform: scale(1.05); 
                box-shadow: 0 12px 48px rgba(255, 51, 102, 0.6);
            }
        }

        .main-title {
            font-size: 44px;
            font-weight: 900;
            margin-bottom: 25px;
            background: linear-gradient(135deg, var(--light), rgba(255, 255, 255, 0.8));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.2;
        }

        .subtitle {
            font-size: 22px;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 35px;
            line-height: 1.4;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        .pain-point {
            background: linear-gradient(135deg, rgba(255, 51, 102, 0.1), rgba(220, 38, 127, 0.1));
            border: 2px solid rgba(255, 51, 102, 0.3);
            border-radius: 20px;
            padding: 25px;
            margin: 30px 0;
            text-align: left;
        }

        .pain-title {
            font-size: 20px;
            font-weight: 800;
            color: var(--danger);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .pain-list {
            list-style: none;
            margin-bottom: 20px;
        }

        .pain-list li {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 12px;
            font-size: 16px;
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.4;
        }

        .pain-list li::before {
            content: "😔";
            font-size: 18px;
            flex-shrink: 0;
        }

        .solution-intro {
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.15), rgba(44, 122, 44, 0.1));
            border: 2px solid rgba(0, 255, 136, 0.4);
            border-radius: 20px;
            padding: 25px;
            margin: 30px 0;
            text-align: center;
        }

        .solution-title {
            font-size: 24px;
            font-weight: 800;
            color: var(--success);
            margin-bottom: 15px;
        }

        .doctor-section {
            margin: 40px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
        }

        .doctor-photo {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            position: relative;
            animation: float-gentle 3s ease-in-out infinite;
            overflow: hidden;
            box-shadow: 
                0 20px 40px rgba(44, 122, 44, 0.3),
                inset 0 4px 8px rgba(255, 255, 255, 0.1);
        }

        .doctor-photo::after {
            content: '';
            position: absolute;
            top: -4px;
            left: -4px;
            right: -4px;
            bottom: -4px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 50%;
            z-index: -1;
            opacity: 0.5;
            animation: pulse 2s ease-in-out infinite;
        }

        .doctor-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
            border: 4px solid rgba(255, 255, 255, 0.1);
        }

        @keyframes float-gentle {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .doctor-info {
            max-width: 600px;
        }

        .doctor-name {
            font-size: 28px;
            font-weight: 800;
            margin-bottom: 12px;
            background: linear-gradient(135deg, var(--accent), var(--success));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .doctor-credentials {
            font-size: 16px;
            color: var(--accent);
            margin-bottom: 20px;
            font-weight: 600;
        }

        .doctor-story {
            text-align: left;
            margin-bottom: 25px;
        }

        .doctor-story p {
            font-size: 16px;
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .doctor-story .highlight {
            color: var(--success);
            font-weight: 700;
        }

        .value-proposition {
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.1), rgba(255, 171, 0, 0.1));
            border: 2px solid rgba(255, 193, 7, 0.4);
            border-radius: 20px;
            padding: 30px;
            margin: 35px 0;
            text-align: center;
        }

        .value-title {
            font-size: 22px;
            font-weight: 800;
            color: var(--warning);
            margin-bottom: 20px;
        }

        .value-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .comparison-item {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
        }

        .comparison-expensive {
            border: 2px solid rgba(255, 51, 102, 0.4);
        }

        .comparison-ours {
            border: 2px solid rgba(0, 255, 136, 0.4);
            background: rgba(0, 255, 136, 0.1);
        }

        .comparison-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .comparison-expensive .comparison-title {
            color: var(--danger);
        }

        .comparison-ours .comparison-title {
            color: var(--success);
        }

        .comparison-price {
            font-size: 28px;
            font-weight: 900;
            margin-bottom: 15px;
        }

        .comparison-expensive .comparison-price {
            color: var(--danger);
        }

        .comparison-ours .comparison-price {
            color: var(--success);
        }

        .comparison-features {
            list-style: none;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
        }

        .comparison-features li {
            margin-bottom: 8px;
            padding: 5px 0;
        }

        .before-after-section {
            background: rgba(26, 26, 26, 0.8);
            border: 2px solid rgba(0, 255, 136, 0.3);
            border-radius: 20px;
            padding: 30px;
            margin: 40px 0;
            text-align: center;
        }

        .before-after-title {
            font-size: 24px;
            font-weight: 800;
            color: var(--success);
            margin-bottom: 25px;
        }

        .before-after-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .result-card {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(0, 255, 136, 0.3);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
        }

        .result-image {
    width: 100%;
    max-width: 250px;
    height: 300px;
    object-fit: contain;      /* ← SÓ MUDA ISSO: de "cover" para "contain" */
    border-radius: 12px;
    margin-bottom: 15px;
    border: 2px solid rgba(0, 255, 136, 0.3);
}

        .result-name {
            font-size: 16px;
            font-weight: 700;
            color: var(--success);
            margin-bottom: 8px;
        }

        .result-achievement {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 10px;
        }

        .result-time {
            font-size: 12px;
            color: var(--accent);
            font-weight: 600;
        }

        .benefits-section {
            margin: 40px 0;
            text-align: left;
        }

        .benefits-title {
            font-size: 26px;
            font-weight: 800;
            margin-bottom: 30px;
            text-align: center;
            background: linear-gradient(135deg, var(--accent), var(--success));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .benefits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .benefit-item {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            border: 1px solid rgba(44, 122, 44, 0.2);
            transition: all 0.3s ease;
        }

        .benefit-item:hover {
            transform: translateY(-3px);
            border-color: var(--primary);
            background: rgba(44, 122, 44, 0.1);
        }

        .benefit-icon {
            font-size: 24px;
            min-width: 24px;
        }

        .benefit-text {
            font-size: 15px;
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.4;
        }

        .cta-section {
            background: linear-gradient(135deg, rgba(44, 122, 44, 0.15), rgba(108, 192, 74, 0.1));
            border: 2px solid rgba(44, 122, 44, 0.3);
            border-radius: 24px;
            padding: 40px;
            margin-top: 40px;
            text-align: center;
        }

        .cta-title {
            font-size: 26px;
            font-weight: 800;
            margin-bottom: 15px;
            color: var(--light);
        }

        .cta-subtitle {
            font-size: 18px;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 25px;
            line-height: 1.5;
        }

        .urgency-section {
            background: rgba(255, 51, 102, 0.1);
            border: 2px solid rgba(255, 51, 102, 0.4);
            border-radius: 16px;
            padding: 20px;
            margin: 25px 0;
            text-align: center;
        }

        .urgency-title {
            font-size: 18px;
            font-weight: 800;
            color: var(--danger);
            margin-bottom: 10px;
        }

        .urgency-text {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 15px;
        }

        .scarcity-counter {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 51, 102, 0.2);
            border: 1px solid rgba(255, 51, 102, 0.4);
            border-radius: 25px;
            padding: 8px 16px;
            font-size: 14px;
            font-weight: 600;
            color: var(--danger);
        }

        .cta-button {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 22px 45px;
            border-radius: 16px;
            font-size: 18px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px rgba(44, 122, 44, 0.4);
            width: 100%;
            max-width: 450px;
            position: relative;
            overflow: hidden;
            animation: ctaPulse 3s ease-in-out infinite;
        }

        @keyframes ctaPulse {
            0%, 100% { 
                transform: scale(1); 
                box-shadow: 0 8px 32px rgba(44, 122, 44, 0.4);
            }
            50% { 
                transform: scale(1.02); 
                box-shadow: 0 12px 48px rgba(44, 122, 44, 0.6);
            }
        }

        .cta-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s ease;
        }

        .cta-button:hover::before {
            left: 100%;
        }

        .cta-button:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 12px 48px rgba(44, 122, 44, 0.6);
            animation: none;
        }

        .disclaimer {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.6);
            margin-top: 20px;
            line-height: 1.4;
        }

        /* QUIZ STYLES */
        .progress-section {
            margin-bottom: 40px;
            position: relative;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .progress-text {
            font-size: 14px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.8);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .progress-doctor {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: var(--accent);
            font-weight: 600;
        }

        .doctor-pulse {
            width: 8px;
            height: 8px;
            background: var(--accent);
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary), var(--accent));
            border-radius: 10px;
            transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
            width: 0%;
            position: relative;
            box-shadow: 0 0 20px rgba(44, 122, 44, 0.5);
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s ease-in-out infinite;
        }

       @keyframes shimmer {
           0% { transform: translateX(-100%); }
           100% { transform: translateX(100%); }
       }

       .question-header {
           text-align: center;
           margin-bottom: 50px;
       }

       .question-number {
           width: 60px;
           height: 60px;
           border-radius: 20px;
           display: flex;
           align-items: center;
           justify-content: center;
           font-size: 24px;
           font-weight: 800;
           margin: 0 auto 20px;
           box-shadow: 0 8px 32px rgba(44, 122, 44, 0.4);
           position: relative;
           background: linear-gradient(135deg, var(--primary), var(--secondary));
           color: white;
       }

       .question-number::after {
           content: '';
           position: absolute;
           top: -2px;
           left: -2px;
           right: -2px;
           bottom: -2px;
           background: linear-gradient(135deg, var(--primary), var(--accent));
           border-radius: 22px;
           z-index: -1;
           opacity: 0.3;
       }

       .question-title {
           font-size: 28px;
           font-weight: 800;
           margin-bottom: 15px;
           background: linear-gradient(135deg, var(--light), rgba(255, 255, 255, 0.8));
           -webkit-background-clip: text;
           -webkit-text-fill-color: transparent;
           background-clip: text;
           line-height: 1.2;
       }

       .question-subtitle {
           font-size: 16px;
           color: rgba(255, 255, 255, 0.7);
           line-height: 1.5;
           max-width: 600px;
           margin: 0 auto;
       }

       .personalization-hint {
           background: rgba(0, 255, 136, 0.1);
           border: 1px solid rgba(0, 255, 136, 0.3);
           border-radius: 12px;
           padding: 15px;
           margin: 20px auto;
           max-width: 500px;
           font-size: 14px;
           color: var(--success);
           font-weight: 600;
           text-align: center;
       }

       .options-grid {
           display: grid;
           grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
           gap: 20px;
           margin-bottom: 50px;
       }

       .option-card {
           background: rgba(255, 255, 255, 0.05);
           backdrop-filter: blur(10px);
           border: 2px solid rgba(255, 255, 255, 0.1);
           border-radius: 24px;
           padding: 30px;
           cursor: pointer;
           transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
           position: relative;
           overflow: hidden;
           text-align: center;
           -webkit-touch-callout: none;
           -webkit-user-select: none;
           -khtml-user-select: none;
           -moz-user-select: none;
           -ms-user-select: none;
           user-select: none;
           touch-action: manipulation;
           -webkit-tap-highlight-color: transparent;
       }

       .option-card:active {
           transform: translateY(-2px) scale(0.98);
           transition: transform 0.1s ease;
       }

       @media (max-width: 768px) {
           .options-grid {
               -webkit-overflow-scrolling: touch;
               touch-action: pan-y;
           }
           
           .option-card {
               min-height: 80px;
           }
       }

       .option-card::before {
           content: '';
           position: absolute;
           top: 0;
           left: -100%;
           width: 100%;
           height: 100%;
           background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
           transition: left 0.6s ease;
       }

       .option-card:hover::before {
           left: 100%;
       }

       .option-card:hover:not(.selected) {
           transform: translateY(-4px) scale(1.01);
           border-color: rgba(44, 122, 44, 0.4);
           box-shadow: 
               0 12px 24px rgba(44, 122, 44, 0.15),
               0 0 0 1px rgba(44, 122, 44, 0.1);
           background: rgba(44, 122, 44, 0.05);
       }

       .option-card.selected {
           transform: translateY(-8px) scale(1.05) !important;
           border-color: var(--primary) !important;
           background: linear-gradient(135deg, rgba(44, 122,44, 0.2), rgba(108, 192, 74, 0.1)) !important;
           box-shadow:
               0 24px 48px rgba(44, 122, 44, 0.3),
               inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
       }

       .option-card.selected .option-icon {
           background: linear-gradient(135deg, var(--primary), var(--secondary));
           transform: scale(1.1);
           box-shadow: 0 8px 32px rgba(44, 122, 44, 0.4);
       }

       .option-icon {
           width: 80px;
           height: 80px;
           background: rgba(255, 255, 255, 0.1);
           border-radius: 20px;
           display: flex;
           align-items: center;
           justify-content: center;
           font-size: 36px;
           margin: 0 auto 20px;
           transition: all 0.4s ease;
           position: relative;
       }

       .option-title {
          font-size: 20px;
          font-weight: 700;
          margin-bottom: 10px;
          color: var(--light);
      }

      .option-description {
          font-size: 14px;
          color: rgba(255, 255, 255, 0.7);
          line-height: 1.5;
      }

      .form-grid {
          display: grid;
          gap: 25px;
          margin-bottom: 50px;
      }

      .input-group {
          position: relative;
      }

      .input-label {
          display: block;
          font-size: 16px;
          font-weight: 600;
          color: var(--light);
          margin-bottom: 12px;
          text-transform: uppercase;
          letter-spacing: 0.5px;
      }

      .input-field {
          width: 100%;
          padding: 20px 24px;
          background: rgba(255, 255, 255, 0.05);
          backdrop-filter: blur(10px);
          border: 2px solid rgba(255, 255, 255, 0.1);
          border-radius: 16px;
          font-size: 18px;
          color: var(--light);
          transition: all 0.3s ease;
          font-weight: 500;
      }

      .input-field:focus {
          outline: none;
          border-color: var(--primary);
          background: rgba(44, 122, 44, 0.1);
          box-shadow: 0 0 0 4px rgba(44, 122, 44, 0.1);
          transform: translateY(-2px);
      }

      .input-field::placeholder {
          color: rgba(255, 255, 255, 0.5);
      }

      .action-buttons {
          display: flex;
          gap: 20px;
          justify-content: center;
          align-items: center;
      }

      .btn {
          padding: 18px 36px;
          border: none;
          border-radius: 16px;
          font-size: 16px;
          font-weight: 700;
          cursor: pointer;
          transition: all 0.3s ease;
          position: relative;
          overflow: hidden;
          text-transform: uppercase;
          letter-spacing: 0.5px;
      }

      .btn-secondary {
          background: rgba(255, 255, 255, 0.1);
          color: var(--light);
          border: 2px solid rgba(255, 255, 255, 0.2);
          backdrop-filter: blur(10px);
      }

      .btn-secondary:hover {
          background: rgba(255, 255, 255, 0.2);
          transform: translateY(-2px);
      }

      .btn-primary {
          background: linear-gradient(135deg, var(--primary), var(--secondary));
          color: white;
          box-shadow: 0 8px 32px rgba(44, 122, 44, 0.4);
          position: relative;
          border: 2px solid transparent;
      }

      .btn-primary::before {
          content: '';
          position: absolute;
          top: 0;
          left: -100%;
          width: 100%;
          height: 100%;
          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
          transition: left 0.6s ease;
      }

      .btn-primary:hover::before {
          left: 100%;
      }

      .btn-primary:hover {
          transform: translateY(-4px) scale(1.02);
          box-shadow: 0 12px 48px rgba(44, 122, 44, 0.6);
      }

      .btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
          transform: none !important;
      }

      .results-container {
          text-align: center;
          animation: revealAnimation 1s ease-out;
      }

      .success-icon {
          font-size: 80px;
          margin-bottom: 20px;
          animation: successBounce 1s ease-out;
      }

      @keyframes successBounce {
          0% { transform: scale(0); }
          50% { transform: scale(1.2); }
          100% { transform: scale(1); }
      }

      .reveal-title {
          font-size: 42px;
          font-weight: 900;
          margin-bottom: 15px;
          background: linear-gradient(135deg, var(--success), var(--accent));
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
      }

      .reveal-subtitle {
          font-size: 18px;
          color: rgba(255, 255, 255, 0.8);
          margin-bottom: 40px;
          line-height: 1.5;
      }

      .results-grid {
          display: grid;
          gap: 30px;
      }

      .mega-result-card {
          background: rgba(20, 20, 20, 0.95);
          border: 3px solid var(--primary);
          border-radius: 32px;
          padding: 40px;
          position: relative;
          overflow: hidden;
          backdrop-filter: blur(20px);
          box-shadow: 0 20px 60px rgba(44, 122, 44, 0.3);
          text-align: center;
      }

      .result-badge {
          background: linear-gradient(135deg, var(--primary), var(--accent));
          color: white;
          padding: 8px 20px;
          border-radius: 25px;
          font-size: 14px;
          font-weight: 900;
          text-transform: uppercase;
          letter-spacing: 1px;
          display: inline-block;
          margin-bottom: 20px;
      }

      .result-value {
          font-size: 72px;
          font-weight: 900;
          color: var(--danger);
          text-shadow: 0 0 30px rgba(255, 51, 102, 0.5);
          margin-bottom: 10px;
          animation: numberPulse 2s ease-in-out infinite;
      }

      .result-label {
          font-size: 24px;
          font-weight: 800;
          color: var(--accent);
          margin-bottom: 30px;
          text-transform: uppercase;
          letter-spacing: 1px;
      }

      .timeline-row {
          display: flex;
          align-items: center;
          gap: 10px;
          background: rgba(0, 0, 0, 0.4);
          padding: 12px 20px;
          border-radius: 12px;
          border: 1px solid rgba(44, 122, 44, 0.3);
          font-size: 14px;
          font-weight: 600;
          margin-bottom: 10px;
      }

      .results-metrics {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: 20px;
      }

      .metric-card {
          background: rgba(255, 255, 255, 0.05);
          border: 2px solid rgba(255, 255, 255, 0.1);
          border-radius: 24px;
          padding: 30px;
          text-align: center;
          transition: all 0.3s ease;
      }

      .metric-card:hover {
          transform: translateY(-5px);
          border-color: var(--primary);
          box-shadow: 0 10px 30px rgba(44, 122, 44, 0.2);
      }

      .metric-card.calories {
          border-color: var(--primary);
          background: rgba(44, 122, 44, 0.1);
      }

      .metric-icon {
          font-size: 36px;
          margin-bottom: 15px;
      }

      .metric-value {
          font-size: 32px;
          font-weight: 900;
          color: var(--primary);
          margin-bottom: 8px;
      }

      .metric-label {
          font-size: 16px;
          font-weight: 700;
          color: var(--light);
          margin-bottom: 5px;
      }

      .metric-subtitle {
          font-size: 12px;
          color: rgba(255, 255, 255, 0.6);
      }

      .cta-primary {
          background: linear-gradient(135deg, var(--primary), var(--secondary));
          color: white;
          border: none;
          padding: 20px 40px;
          border-radius: 16px;
          font-size: 16px;
          font-weight: 800;
          text-transform: uppercase;
          letter-spacing: 1px;
          cursor: pointer;
          transition: all 0.3s ease;
          box-shadow: 0 8px 32px rgba(44, 122, 44, 0.4);
          width: 100%;
          max-width: 400px;
      }

      .cta-primary:hover {
          transform: translateY(-4px) scale(1.02);
          box-shadow: 0 12px 48px rgba(44, 122, 44, 0.6);
      }

      /* HIDE CLASSES */
      .hidden {
          display: none !important;
      }

      .cta-button.loading {
          pointer-events: none;
          opacity: 0.8;
      }

      .cta-button.loading::after {
          content: '';
          width: 20px;
          height: 20px;
          border: 2px solid transparent;
          border-top: 2px solid white;
          border-radius: 50%;
          animation: spin 1s linear infinite;
          margin-left: 10px;
      }

      @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
      }

      @keyframes revealAnimation {
          from { opacity: 0; transform: scale(0.9) translateY(30px); }
          to { opacity: 1; transform: scale(1) translateY(0); }
      }
      
      @keyframes numberPulse {
          0%, 100% { transform: scale(1); }
          50% { transform: scale(1.05); }
      }

      @keyframes doctorPulse {
          0%, 100% { transform: scale(1); }
          50% { transform: scale(1.1); }
      }
      
      @keyframes rotate {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
      }
      
      @keyframes processingGlow {
          0%, 100% { 
              border-color: rgba(44, 122, 44, 0.3); 
              box-shadow: 0 0 20px rgba(44, 122, 44, 0.2); 
          }
          50% { 
              border-color: rgba(44, 122, 44, 0.8); 
              box-shadow: 0 0 30px rgba(44, 122, 44, 0.5); 
          }
      }
      
      .processing {
          animation: processingGlow 2s ease-in-out infinite !important;
          background: rgba(44, 122, 44, 0.15) !important;
          border-color: rgba(44, 122, 44, 0.5) !important;
      }
      
      .completed {
          background: rgba(0, 255, 136, 0.15) !important;
          border-color: rgba(0, 255, 136, 0.5) !important;
      }
      
      @keyframes countUp {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
      }

      @keyframes slideIndicator {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(100%); }
      }
      
      @keyframes bounce {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-10px); }
      }

      @keyframes pulse {
          0%, 100% { transform: scale(1); }
          50% { transform: scale(1.05); }
      }

      /* ✅ NOTIFICAÇÕES SOCIAIS - ESTILOS NECESSÁRIOS */
      .social-notification {
          background: rgba(0, 0, 0, 0.9);
          backdrop-filter: blur(20px);
          border: 1px solid rgba(0, 255, 136, 0.3);
          border-radius: 16px;
          padding: 12px 16px;
          margin-bottom: 8px;
          transform: translateX(100%);
          opacity: 0;
          transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
          position: relative;
          overflow: hidden;
          max-width: 100%;
          word-wrap: break-word;
      }

      .social-notification::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 4px;
          height: 100%;
          background: linear-gradient(135deg, var(--success), var(--accent));
      }

      .social-notification.show {
          transform: translateX(0);
          opacity: 1;
          animation: slideInNotification 0.5s ease-out;
      }

      .social-notification.hide {
          transform: translateX(100%);
          opacity: 0;
      }

      @keyframes slideInNotification {
          0% { 
              transform: translateX(100%) scale(0.9); 
              opacity: 0; 
          }
          100% { 
              transform: translateX(0) scale(1); 
              opacity: 1; 
          }
      }

      .social-notification:hover {
          border-color: rgba(0, 255, 136, 0.6);
          transform: translateX(-4px);
          box-shadow: 0 12px 48px rgba(0, 0, 0, 0.5);
      }

      /* ✅ NOTIFICAÇÕES DE COMPRA - ESTILOS OTIMIZADOS */
      .purchase-notification {
          position: fixed;
          bottom: 20px;
          left: 20px;
          background: rgba(0, 0, 0, 0.92);
          backdrop-filter: blur(15px);
          border: 1px solid rgba(0, 255, 136, 0.3);
          border-radius: 12px;
          padding: 12px 16px;
          transform: translateX(-120%);
          opacity: 0;
          transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
          z-index: 1000;
          max-width: 280px;
          font-family: 'Inter', sans-serif;
          box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
          border-left: 3px solid var(--success);
      }

      .purchase-notification.show {
          transform: translateX(0);
          opacity: 1;
      }

      .purchase-notification.hide {
          transform: translateX(-120%);
          opacity: 0;
      }

      .notification-content {
          display: flex;
          align-items: center;
          gap: 12px;
      }

      .notification-avatar {
          width: 32px;
          height: 32px;
          background: linear-gradient(135deg, var(--primary), var(--accent));
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 16px;
          flex-shrink: 0;
      }

      .notification-text {
          flex: 1;
          min-width: 0;
      }

      .notification-name {
          font-size: 13px;
          font-weight: 600;
          color: var(--light);
          margin-bottom: 2px;
          line-height: 1.2;
      }

      .notification-action {
          font-size: 11px;
          color: rgba(255, 255, 255, 0.8);
          line-height: 1.3;
          margin-bottom: 2px;
      }

      .notification-time {
          font-size: 10px;
          color: var(--success);
          font-weight: 500;
      }

      .notification-check {
          color: var(--success);
          font-size: 14px;
          flex-shrink: 0;
          animation: checkPulse 2s ease-in-out infinite;
      }

      @keyframes checkPulse {
          0%, 100% { transform: scale(1); opacity: 1; }
          50% { transform: scale(1.1); opacity: 0.8; }
      }

      @media (max-width: 768px) {
          .header {
              padding: 15px 0;
          }

          .header-content {
              flex-direction: column;
              gap: 12px;
              padding: 0 15px;
          }

          .trust-indicators {
              order: -1;
              flex-wrap: wrap;
              justify-content: center;
              gap: 15px;
          }

          .trust-item {
              font-size: 11px;
          }

          .logo {
              font-size: 20px;
          }

          .logo-icon {
              width: 35px;
              height: 35px;
              font-size: 18px;
          }

          .container {
              padding: 15px 12px;
              min-height: calc(100vh - 60px);
          }

          .landing-card, .quiz-card {
              padding: 25px 20px;
              border-radius: 20px;
              box-shadow: 
                  0 20px 40px rgba(0, 0, 0, 0.3),
                  inset 0 1px 0 rgba(255, 255, 255, 0.1);
          }

          .warning-badge {
              font-size: 12px;
              padding: 8px 18px;
              margin-bottom: 20px;
          }

          .main-title {
              font-size: 26px;
              margin-bottom: 18px;
              line-height: 1.2;
          }

          .subtitle {
              font-size: 18px;
              margin-bottom: 25px;
              line-height: 1.4;
          }

          .pain-point, .solution-intro, .value-proposition {
              padding: 20px 15px;
              margin: 25px 0;
              border-radius: 16px;
          }

          .pain-title, .solution-title, .value-title {
              font-size: 18px;
              margin-bottom: 12px;
          }

          .pain-list li {
              font-size: 14px;
              margin-bottom: 10px;
          }

          .doctor-section {
              margin: 30px 0;
              gap: 20px;
          }

          .doctor-photo {
              width: 140px;
              height: 140px;
          }

          .doctor-info {
              max-width: 100%;
          }

          .doctor-name {
              font-size: 22px;
              margin-bottom: 8px;
          }

          .doctor-credentials {
              font-size: 14px;
              margin-bottom: 15px;
          }

          .doctor-story p {
              font-size: 14px;
              margin-bottom: 12px;
              text-align: center;
          }

          .value-comparison {
              grid-template-columns: 1fr;
              gap: 15px;
          }

          .comparison-item {
              padding: 15px;
          }

          .comparison-price {
              font-size: 24px;
          }

          .before-after-section {
              padding: 25px 15px;
              margin: 30px 0;
          }

          .before-after-title {
              font-size: 20px;
              margin-bottom: 20px;
          }

          .before-after-grid {
              grid-template-columns: 1fr;
              gap: 15px;
          }

          .result-image {
              height: 250px;
          }

          .benefits-section {
              margin: 30px 0;
          }

          .benefits-title {
              font-size: 22px;
              margin-bottom: 25px;
          }

          .benefits-grid {
              grid-template-columns: 1fr;
              gap: 12px;
          }

          .benefit-item {
              padding: 16px;
              border-radius: 12px;
          }

          .benefit-text {
              font-size: 14px;
          }

          .cta-section {
              padding: 25px 18px;
              border-radius: 18px;
              margin-top: 30px;
          }

          .cta-title {
              font-size: 22px;
              margin-bottom: 12px;
              line-height: 1.3;
          }

          .cta-subtitle {
              font-size: 16px;
              margin-bottom: 20px;
          }

          .urgency-section {
              padding: 15px;
              margin: 20px 0;
          }

          .urgency-title {
              font-size: 16px;
          }

          .urgency-text {
              font-size: 13px;
          }

          .scarcity-counter {
              font-size: 12px;
              padding: 6px 12px;
          }

          .cta-button {
              padding: 18px 25px;
              font-size: 16px;
              border-radius: 12px;
              max-width: 100%;
          }

          .question-title {
              font-size: 22px;
              line-height: 1.2;
              margin-bottom: 12px;
          }

          .question-subtitle {
              font-size: 14px;
              margin-bottom: 20px;
          }

          .personalization-hint {
              font-size: 12px;
              padding: 12px;
          }

          .question-number {
              width: 45px;
              height: 45px;
              font-size: 18px;
              border-radius: 14px;
              margin-bottom: 15px;
          }

          .options-grid {
              grid-template-columns: 1fr;
              gap: 10px;
              margin-bottom: 35px;
          }

          .option-card {
              padding: 16px 14px;
              border-radius: 14px;
              min-height: 60px;
          }

          .option-icon {
              width: 50px;
              height: 50px;
              font-size: 22px;
              border-radius: 14px;
              margin: 0 auto 12px;
          }

          .option-title {
              font-size: 16px;
              margin-bottom: 6px;
          }

          .option-description {
              font-size: 12px;
              line-height: 1.3;
          }

          .action-buttons {
              flex-direction: column;
              gap: 10px;
          }

          .btn {
              width: 100%;
              padding: 14px 20px;
              font-size: 14px;
              border-radius: 12px;
              min-height: 48px;
          }

          .purchase-notification {
              bottom: 80px;
              left: 15px;
              right: 15px;
              max-width: none;
              width: auto;
          }
          
          .notification-content {
              gap: 10px;
          }
          
          .notification-avatar {
              width: 28px;
              height: 28px;
              font-size: 14px;
          }
          
          .notification-name {
              font-size: 12px;
          }
          
          .notification-action {
              font-size: 10px;
          }
      }
  </style>
</head>
<body>
  <!-- ✅ CONTADOR DE USUÁRIOS ATIVOS FLUTUANTE -->
  <div id="activeUsersCounter">
      <div class="active-indicator"></div>
      <div class="counter-text">
          <span class="counter-number" id="activeCount">68</span> pessoas fazendo o teste agora
      </div>
  </div>
  
  <!-- ✅ PARTÍCULAS OTIMIZADAS - REDUZIDAS -->
  <div class="particles" id="particles"></div>

  <header class="header">
      <div class="header-content">
          <div class="trust-indicators">
              <div class="trust-item">
                  <span>🔒</span>
                  <span>Dados Seguros</span>
              </div>
              <div class="trust-item">
                  <span>⚡</span>
                  <span>Resultado em 2min</span>
              </div>
              <div class="trust-item">
                  <span>👥</span>
                  <span>+15.000 transformadas</span>
              </div>
          </div>
          <div class="logo">
              <div class="logo-icon">👩‍⚕️</div>
              <span>Dra. Giovana Nutricionista</span>
          </div>
      </div>
  </header>

  <div class="container">
      <!-- ✅ LANDING PAGE ULTRA PERSUASIVA - ESTILO ÍCARO -->
      <div class="landing-card" id="landingPage">
          <div class="warning-badge">
              ⚠️ PARE! Antes de tentar mais uma dieta...
          </div>
          
          <h1 class="main-title">
              "Já tentou 5, 10, 15 dietas diferentes e nada funcionou?"
          </h1>
          
          <p class="subtitle">
              O problema não é você... é que <strong>ninguém nunca fez uma dieta DE VERDADE para o SEU corpo.</strong>
              <br>Hoje isso muda.
          </p>

          <!-- ✅ SEÇÃO DE DOR - PEGANDO NA FERIDA -->
          <div class="pain-point">
              <div class="pain-title">
                  😔 Você já passou por isso?
              </div>
              <ul class="pain-list">
                  <li>Comprou aquela dieta "milagrosa" que todo mundo falava</li>
                  <li>Seguiu à risca por 1 semana e não perdeu nem 1 kg</li>
                  <li>Se sentiu burra por ter acreditado "mais uma vez"</li>
                  <li>Pensou: "Comigo nada funciona mesmo..."</li>
                  <li>Gastou dinheiro com comidas caras que não gosta</li>
                  <li>Desistiu frustrada... OUTRA VEZ</li>
              </ul>
              <div style="text-align: center; margin-top: 20px;">
                  <strong style="color: var(--danger); font-size: 18px;">
                      Eu sei como é essa dor... Porque eu vivia isso no meu consultório todos os dias.
                  </strong>
              </div>
          </div>

          <!-- ✅ SOLUÇÃO DIFERENCIADA -->
          <div class="solution-intro">
              <div class="solution-title">
                  🎯 Finalmente descobri o REAL problema:
              </div>
              <p style="font-size: 18px; color: rgba(255, 255, 255, 0.9); margin-bottom: 15px;">
                  <strong>Todas essas "dietas" são GENÉRICAS.</strong> Feitas para uma pessoa imaginária que não existe.
              </p>
              <p style="font-size: 16px; color: rgba(255, 255, 255, 0.8);">
                  É como se você fosse no médico e ele te desse o mesmo remédio que deu para 1000 pessoas diferentes. <strong>Não faz sentido!</strong>
              </p>
          </div>

          <div class="doctor-section">
              <div class="doctor-photo">
                  <img src="Dra Giovana.png" alt="Dra. Giovana  - Nutricionista" loading="lazy" width="180" height="180" />
              </div>
      
              <div class="doctor-info">
                  <h2 class="doctor-name">Dra. Giovana</h2>
                  <p class="doctor-credentials">CRN-3 87654 • 7 anos transformando vidas • +15.000 pessoas atendidas</p>
                  
                  <div class="doctor-story">
                      <p><strong class="highlight">"Minha filha chegou chorando em casa..."</strong></p>
                      <p>"Mãe, já tentei 8 dietas diferentes e nada funciona comigo. Acho que sou um caso perdido."</p>
                      
                      <p style="margin-top: 20px;"><strong>Foi aí que tudo mudou.</strong></p>
                      
                      <p>Percebi que eu estava cometendo o mesmo erro que todo mundo: dando receitas iguais para corpos completamente diferentes.</p>
                      
                      <p><strong class="highlight">Criei então um método revolucionário:</strong> Em vez de dar uma dieta pronta, eu analiso o SEU metabolismo, a SUA rotina, as SUAS limitações.</p>
                      
                      <p style="margin-top: 15px; color: var(--success); font-weight: 600;">Resultado: Minha filha perdeu 12kg em 4 meses. E desde então, mais de 15.000 mulheres já transformaram suas vidas.</p>
                  </div>
              </div>
          </div>

          <!-- ✅ SEÇÃO VALOR PERCEBIDO -->
          <div class="value-proposition">
              <div class="value-title">
                  💰 Quanto custa ter uma dieta REALMENTE personalizada?
              </div>
              
              <div class="value-comparison">
                  <div class="comparison-item comparison-expensive">
                      <div class="comparison-title">Nutricionista Presencial</div>
                      <div class="comparison-price">R$ 250 - R$ 800</div>
                      <ul class="comparison-features">
                          <li>❌ Apenas 1 consulta</li>
                          <li>❌ Você precisa ir presencial</li>
                          <li>❌ Sem acompanhamento real</li>
                          <li>❌ Comidas caras que você não gosta</li>
                      </ul>
                  </div>
                  
                  <div class="comparison-item comparison-ours">
                      <div class="comparison-title">Método Dra. Giovana</div>
                      <div class="comparison-price">R$ 29,90</div>
                      <ul class="comparison-features">
                          <li>✅ 100% personalizado para VOCÊ</li>
                          <li>✅ Analisa 6 aspectos únicos seus</li>
                          <li>✅ Comidas que cabem no seu orçamento</li>
                          <li>✅ 200+ receitas adaptadas</li>
                          <li>✅ Acesso vitalício</li>
                      </ul>
                  </div>
              </div>
              
              <div style="text-align: center; margin-top: 20px;">
                  <strong style="color: var(--success); font-size: 20px;">
                      Economia de mais de R$ 420! Menos que um delivery de pizza.
                  </strong>
              </div>
          </div>

          <!-- ✅ ANTES E DEPOIS -->
          <div class="before-after-section">
              <div class="before-after-title">
                  🔥 Resultados REAIS das minhas pacientes:
              </div>
              
              <div class="before-after-grid">
                  <div class="result-card">
                      <img src="antes_depois_1.jpg" alt="Transformação Maria" class="result-image" loading="lazy">
                      <div class="result-name">Maria Santos, 34 anos</div>
                      <div class="result-achievement">"Perdi 8kg sem passar fome"</div>
                      <div class="result-time">Em apenas 2 meses</div>
                  </div>
                  
                  <div class="result-card">
                      <img src="antes_depois_2.jpg" alt="Transformação Ana" class="result-image" loading="lazy">
                      <div class="result-name">Ana Paula, 41 anos</div>
                      <div class="result-achievement">"Eliminei 12kg gastando pouco"</div>
                      <div class="result-time">Em 3 meses</div>
                  </div>
                  
                  <div class="result-card">
                      <img src="antes_depois_3.jpg" alt="Transformação Carla" class="result-image" loading="lazy">
                      <div class="result-name">Carla Ferreira, 28 anos</div>
                      <div class="result-achievement">"15kg eliminados definitivamente"</div>
                      <div class="result-time">Em 4 meses</div>
                  </div>
              </div>
              
              <div style="text-align: center; margin-top: 25px; padding: 20px; background: rgba(0, 255, 136, 0.1); border-radius: 12px;">
                  <strong style="color: var(--success); font-size: 16px;">
                      ⭐ Todas seguiram o mesmo método que você vai receber hoje!
                  </strong>
              </div>
          </div>

          <div class="benefits-section">
              <h3 class="benefits-title">
                  🚀 O que torna este método DIFERENTE de tudo que você já tentou:
              </h3>
              
              <div class="benefits-grid">
                  <div class="benefit-item">
                      <div class="benefit-icon">🧬</div>
                      <div class="benefit-text">
                          <strong>Análise do SEU DNA Metabólico:</strong> Calculamos suas necessidades exatas baseado no seu peso, altura, idade e objetivo
                      </div>
                  </div>
                  
                  <div class="benefit-item">
                      <div class="benefit-icon">💰</div>
                      <div class="benefit-text">
                         <strong>Ingredientes Baratos:</strong> Usamos apenas comidas que você encontra em qualquer mercado por menos de R$ 8/dia
                      </div>
                  </div>
                  
                  <div class="benefit-item">
                      <div class="benefit-icon">⏰</div>
                      <div class="benefit-text">
                          <strong>Para SUA Rotina:</strong> Se você trabalha fora, tem filhos, não tem tempo... a dieta se adapta à SUA vida real
                      </div>
                  </div>
                  
                  <div class="benefit-item">
                      <div class="benefit-icon">🏥</div>
                      <div class="benefit-text">
                          <strong>Respeita SUA Saúde:</strong> Consideramos diabetes, hipertensão, intolerâncias... tudo que é único em você
                      </div>
                  </div>
                  
                  <div class="benefit-item">
                      <div class="benefit-icon">📱</div>
                      <div class="benefit-text">
                          <strong>Receitas Prontas:</strong> Não é só "coma isso". São 200+ receitas detalhadas que você vai AMAR fazer
                      </div>
                  </div>
                  
                  <div class="benefit-item">
                      <div class="benefit-icon">🎯</div>
                      <div class="benefit-text">
                          <strong>Resultado Garantido:</strong> Ou você tem resultado em 30 dias, ou devolvemos 100% do seu dinheiro
                      </div>
                  </div>
              </div>
          </div>

          <!-- ✅ CTA SECTION ULTRA PERSUASIVA -->
          <div class="cta-section">
              <h3 class="cta-title">
                  🔥 Chega de tentar dietas que não funcionam!
              </h3>
              <p class="cta-subtitle">
                  <strong>Pela primeira vez na sua vida</strong>, você vai ter uma dieta feita EXCLUSIVAMENTE para você.
                  <br>Não é adaptação. Não é genérica. <strong>É SUA.</strong>
              </p>

              <!-- ✅ URGÊNCIA E ESCASSEZ REAL -->
              <div class="urgency-section">
                  <div class="urgency-title">
                      ⚠️ ÚLTIMAS VAGAS DE HOJE
                  </div>
                  <div class="urgency-text">
                      Para manter a qualidade do atendimento, libero apenas 150 vagas por dia.
                      <br><strong>Restam apenas 12 vagas</strong> para hoje.
                  </div>
                  <div class="scarcity-counter">
                      ⏰ <span id="remaining-spots">12</span> vagas restantes hoje
                  </div>
              </div>
              
              <button class="cta-button" id="startQuizBtn">
                  🎯 QUERO MINHA DIETA PERSONALIZADA AGORA
              </button>
              
              <p class="disclaimer" style="margin-top: 15px; font-size: 14px; color: rgba(255, 255, 255, 0.8);">
                  ⚡ Receba em 2 minutos • 🔒 Pagamento 100% seguro • 💚 Garantia de 30 dias
              </p>
              
              <div style="margin-top: 20px; padding: 15px; background: rgba(0, 255, 136, 0.1); border-radius: 12px;">
                  <div style="font-size: 14px; color: var(--success); font-weight: 600; margin-bottom: 8px;">
                      🔥 OFERTA ESPECIAL - APENAS HOJE:
                  </div>
                  <div style="display: flex; align-items: center; justify-content: center; gap: 15px;">
                      <span style="text-decoration: line-through; color: rgba(255, 255, 255, 0.5); font-size: 16px;">
                          De R$ 59,90
                      </span>
                      <span style="color: var(--success); font-size: 24px; font-weight: 900;">
                          Por apenas R$ 29,90
                      </span>
                  </div>
                  <div style="font-size: 12px; color: rgba(255, 255, 255, 0.8); margin-top: 5px;">
                      Promoção encerra hoje às 23:59h
                  </div>
              </div>
          </div>
      </div>

      <!-- ✅ QUIZ SECTION - COM MELHOR COPY -->
      <div class="quiz-card hidden" id="quizSection">
          <div class="progress-section">
              <div class="progress-header">
                  <div class="progress-text" id="progressText">Criando SUA dieta personalizada - Etapa 1 de 6</div>
                  <div class="progress-doctor">
                      <div class="doctor-pulse"></div>
                      <span>Dra. Giovana analisando</span>
                  </div>
              </div>
              <div class="progress-bar">
                  <div class="progress-fill" id="progressFill"></div>
              </div>
          </div>

          <div id="questionContainer">
              <div class="question-header">
                  <div class="question-number" id="questionNumber">1</div>
                  <h1 class="question-title" id="questionTitle">Qual é seu maior sonho agora?</h1>
                  <p class="question-subtitle" id="questionSubtitle">
                      Preciso entender sua motivação real para criar a dieta perfeita para VOCÊ.
                  </p>
                  <div class="personalization-hint">
                      🧬 Cada resposta personaliza mais sua dieta
                  </div>
              </div>

              <div class="options-grid" id="optionsGrid">
                  <!-- Será preenchido dinamicamente -->
              </div>

              <div class="action-buttons">
                  <button class="btn btn-secondary" id="backBtn" style="display: none;">
                      ← Voltar
                  </button>
                  <button class="btn btn-primary" id="nextBtn" disabled>
                      Continuar Personalizando →
                  </button>
              </div>
          </div>
      </div>
  </div>

  <!-- ✅ SCRIPTS MOVIDOS PARA O FINAL - OTIMIZAÇÃO CRÍTICA -->
  <script>
 window.pixelId = "6854369b2f2ab7e4442539ea";
 var a = document.createElement("script");
 a.setAttribute("async", "");
 a.setAttribute("defer", "");
 a.setAttribute("src", "https://cdn.utmify.com.br/scripts/pixel/pixel.js");
 document.head.appendChild(a);
</script>

  <!-- Meta Pixel Code -->
  <script async defer>
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
      fbq('init', '1002938195345180');
      fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=1002938195345180&ev=PageView&noscript=1"
  /></noscript>

  <!-- Clarity tracking code -->
  <script type="text/javascript" async defer>
      (function(c,l,a,r,i,t,y){
          c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
          t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
          y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
      })(window, document, "clarity", "script", "rtz89p15pn");
  </script>

  <script>
      // ✨ SISTEMA DE USUÁRIOS ATIVOS COM OSCILAÇÃO NATURAL
      class ActiveUsersManager {
          constructor() {
              this.baseNumbers = [52, 58, 64, 68, 73, 79, 84, 89];
              this.currentIndex = 3;
              this.isUpdating = false;
              this.updateInterval = null;
              this.variations = [-4, -2, -1, 0, 1, 3];
              
              this.counterElement = document.getElementById('activeCount');
              
              this.init();
          }
          
          init() {
              this.updateDisplay(this.getRandomNumber());
              this.startOscillation();
              this.setupPageChangeListeners();
          }
          
          getRandomNumber() {
              const baseNumber = this.baseNumbers[this.currentIndex];
              const variation = this.variations[Math.floor(Math.random() * this.variations.length)];
              return Math.max(15, baseNumber + variation);
          }
          
          getNextNumber() {
              const shouldGoUp = Math.random() > 0.4;
              
              if (shouldGoUp && this.currentIndex < this.baseNumbers.length - 1) {
                  this.currentIndex++;
              } else if (!shouldGoUp && this.currentIndex > 0) {
                  this.currentIndex--;
              } else {
                  if (this.currentIndex === 0) this.currentIndex = 1;
                  else if (this.currentIndex === this.baseNumbers.length - 1) this.currentIndex = this.baseNumbers.length - 2;
              }
              
              return this.getRandomNumber();
          }
          
          updateDisplay(number) {
              if (this.isUpdating) return;
              
              this.isUpdating = true;
              
              if (this.counterElement) {
                  this.animateNumber(this.counterElement, number);
              }
              
              setTimeout(() => {
                  this.isUpdating = false;
              }, 800);
          }
          
          animateNumber(element, newNumber) {
              element.classList.add('updating');
              
              setTimeout(() => {
                  element.textContent = newNumber;
                  element.classList.remove('updating');
              }, 150);
          }
          
          startOscillation() {
              setTimeout(() => {
                  this.scheduleNextUpdate();
              }, Math.random() * 5000 + 3000);
          }
          
          scheduleNextUpdate() {
              if (this.updateInterval) {
                  clearTimeout(this.updateInterval);
              }
              
              const nextInterval = Math.random() * 17000 + 8000;
              
              this.updateInterval = setTimeout(() => {
                  const nextNumber = this.getNextNumber();
                  this.updateDisplay(nextNumber);
                  this.scheduleNextUpdate();
              }, nextInterval);
          }
          
          setupPageChangeListeners() {
              document.addEventListener('quizStarted', () => {
                  setTimeout(() => {
                      const boostNumber = this.getRandomNumber() + Math.floor(Math.random() * 4) + 2;
                      this.updateDisplay(Math.min(45, boostNumber));
                  }, Math.random() * 2000 + 1000);
              });
              
              document.addEventListener('backToLanding', () => {
                  setTimeout(() => {
                      this.updateDisplay(this.getRandomNumber());
                  }, 500);
              });
          }
          
          simulateUserActivity() {
              if (Math.random() > 0.7) {
                  setTimeout(() => {
                      const currentBase = this.baseNumbers[this.currentIndex];
                      const boostedNumber = currentBase + Math.floor(Math.random() * 3) + 1;
                      this.updateDisplay(Math.min(50, boostedNumber));
                  }, Math.random() * 3000 + 1000);
              }
          }
      }

      // Sistema de gerenciamento de vagas
      class ScarcityManager {
          constructor() {
              this.remainingSpotsElement = document.getElementById('remaining-spots');
              this.currentSpots = 12;
              this.isActive = false;
          }
          
          init() {
            // this.startDecrementing();
          }
          
          startDecrementing() {
              if (this.isActive) return;
              this.isActive = true;
              
              setInterval(() => {
                  if (Math.random() > 0.7 && this.currentSpots > 8) {
                      this.currentSpots--;
                      if (this.remainingSpotsElement) {
                          this.remainingSpotsElement.textContent = this.currentSpots;
                          this.remainingSpotsElement.style.animation = 'countUp 0.5s ease-out';
                      }
                  }
              }, Math.random() * 25000 + 15000);
          }
      }

      let currentQuestion = 0;
      let answers = {};
      let isOnLandingPage = true;
      let activeUsersManager;
      let scarcityManager;

      // Sistema de persistência de dados
      const DataStorage = {
          isLocalStorageAvailable: function() {
              try {
                  const testKey = 'test_' + Date.now();
                  localStorage.setItem(testKey, 'test');
                  localStorage.removeItem(testKey);
                  return true;
              } catch (e) {
                  return false;
              }
          },
          
          memoryStorage: {},
          
          setItem: function(key, value) {
              const jsonValue = JSON.stringify(value);
              if (this.isLocalStorageAvailable()) {
                  try {
                      localStorage.setItem('dra_giovana_' + key, jsonValue);
                      return true;
                  } catch (e) {
                      console.warn('Erro ao salvar no localStorage, usando memória:', e);
                  }
              }
              this.memoryStorage['dra_giovana_' + key] = jsonValue;
              return true;
          },
          
          getItem: function(key) {
              const fullKey = 'dra_giovana_' + key;
              if (this.isLocalStorageAvailable()) {
                  try {
                      const value = localStorage.getItem(fullKey);
                      if (value) {
                          return JSON.parse(value);
                      }
                  } catch (e) {
                      console.warn('Erro ao ler localStorage:', e);
                  }
              }
              const memValue = this.memoryStorage[fullKey];
              if (memValue) {
                  return JSON.parse(memValue);
              }
              return null;
          }
      };

      const questions = [
          {
              title: "Qual é seu maior sonho agora?",
              subtitle: "Preciso entender sua motivação real para criar a dieta perfeita para VOCÊ.",
              type: "choice",
              options: [
                  { 
                      value: "lose_weight", 
                      icon: "🔥", 
                      title: "Eliminar gordura e me sentir linda", 
                      description: "Quero perder peso de forma saudável e definitiva" 
                  },
                  { 
                      value: "gain_muscle", 
                      icon: "💪", 
                      title: "Ganhar músculos e definição", 
                      description: "Foco em hipertrofia e corpo tonificado" 
                  },
                  { 
                      value: "maintain", 
                      icon: "⚖️", 
                      title: "Manter meu peso atual", 
                      description: "Alimentação equilibrada para manter a forma" 
                  },
                  { 
                      value: "improve_health", 
                      icon: "❤️", 
                      title: "Ter mais energia e disposição", 
                      description: "Melhorar saúde e bem-estar geral" 
                  }
              ]
          },
          {
              title: "Você é homem ou mulher?",
              subtitle: "Homens e mulheres têm metabolismos diferentes. Preciso saber para calcular suas calorias certas.",
              type: "choice",
              options: [
                  { 
                      value: "female", 
                      icon: "👩", 
                      title: "Sou mulher", 
                      description: "Metabolismo feminino" 
                  },
                  { 
                      value: "male", 
                      icon: "👨", 
                      title: "Sou homem", 
                      description: "Metabolismo masculino" 
                  }
              ]
          },
          {
              title: "Qual sua faixa de idade?",
              subtitle: "Sua idade influencia diretamente no seu metabolismo. Vou calcular suas necessidades exatas.",
              type: "choice",
              options: [
                  { 
                      value: "18-25", 
                      icon: "🌟", 
                      title: "18 a 25 anos", 
                      description: "Metabolismo acelerado, alta energia" 
                  },
                  { 
                      value: "26-35", 
                      icon: "🎯", 
                      title: "26 a 35 anos", 
                      description: "Idade produtiva, metabolismo estável" 
                  },
                  { 
                      value: "36-45", 
                      icon: "⚡", 
                      title: "36 a 45 anos", 
                      description: "Metabolismo desacelerando" 
                  },
                  { 
                      value: "46-55", 
                      icon: "🧘", 
                      title: "46 a 55 anos", 
                      description: "Foco em manutenção da saúde" 
                  },
                  { 
                      value: "55+", 
                      icon: "🌿", 
                      title: "Acima de 55 anos", 
                      description: "Nutrição para longevidade" 
                  }
              ]
          },
          {
              title: "Suas medidas atuais",
              subtitle: "Estes dados são essenciais para eu calcular exatamente quantas calorias seu corpo precisa.",
              type: "form",
              fields: [
                  { 
                      name: "weight", 
                      label: "Seu peso atual (kg)", 
                      type: "number", 
                      placeholder: "Ex: 70"
                  },
                  { 
                      name: "height", 
                      label: "Sua altura (cm)", 
                      type: "number", 
                      placeholder: "Ex: 165"
                  },
                  { 
                      name: "target_weight", 
                      label: "Peso que você quer chegar (kg)", 
                      type: "number", 
                      placeholder: "Ex: 60"
                  }
              ]
          },
          {
              title: "Tem algum problema de saúde?",
              subtitle: "Preciso adaptar sua dieta se você tem diabetes, pressão alta ou qualquer condição especial.",
              type: "choice",
              options: [
                  { 
                      value: "none", 
                      icon: "✅", 
                      title: "Não tenho nenhum problema", 
                      description: "Saúde normal, sem restrições" 
                  },
                  { 
                      value: "diabetes", 
                      icon: "🩺", 
                      title: "Tenho diabetes", 
                      description: "Tipo 1 ou tipo 2" 
                  },
                  { 
                      value: "hypertension", 
                      icon: "❤️", 
                      title: "Tenho pressão alta", 
                      description: "Hipertensão arterial" 
                  },
                  { 
                      value: "thyroid", 
                      icon: "🦋", 
                      title: "Problemas na tireoide", 
                      description: "Hipo ou hipertireoidismo" 
                  },
                  { 
                      value: "cholesterol", 
                      icon: "🫀", 
                      title: "Colesterol alto", 
                      description: "Níveis elevados de colesterol" 
                  },
                  { 
                      value: "other", 
                      icon: "📋", 
                      title: "Outras condições",
                      description: "Outras condições de saúde"
                  }
              ]
          },
          {
              title: "Seus dados para eu te entregar sua dieta",
              subtitle: "Preciso desses dados para enviar sua dieta personalizada e te acompanhar nessa transformação.",
              type: "form",
              fields: [
                  { 
                      name: "name", 
                      label: "Como posso te chamar?", 
                      type: "text", 
                      placeholder: "Seu primeiro nome"
                  },
                  { 
                      name: "phone", 
                      label: "Seu WhatsApp", 
                      type: "tel", 
                      placeholder: "(11) 99999-9999"
                  },
                  { 
                      name: "email", 
                      label: "Seu melhor e-mail", 
                      type: "email", 
                      placeholder: "seuemail@gmail.com"
                  }
              ]
          }
      ];

      // ✅ FUNÇÃO OTIMIZADA PARA CRIAR PARTÍCULAS - REDUZIDAS
      function createParticles() {
          const particlesContainer = document.getElementById('particles');
          const isMobile = window.innerWidth <= 768;
          const particleCount = isMobile ? 15 : 30;

          for (let i = 0; i < particleCount; i++) {
              const particle = document.createElement('div');
              particle.className = 'particle';
              particle.style.left = Math.random() * 100 + '%';
              particle.style.top = Math.random() * 100 + '%';
              particle.style.animationDelay = Math.random() * 6 + 's';
              particlesContainer.appendChild(particle);
          }
      }

      // ✅ DEBOUNCE PARA EVENT LISTENERS
      function debounce(func, wait) {
          let timeout;
          return function executedFunction(...args) {
              const later = () => {
                  clearTimeout(timeout);
                  func(...args);
              };
              clearTimeout(timeout);
              timeout = setTimeout(later, wait);
          };
      }

      document.addEventListener('DOMContentLoaded', function() {
          cleanExpiredData();
          
          requestAnimationFrame(() => {
              createParticles();
          });
          
          console.log('🛡️ Inicializando sistemas anti-bot...');
          BehaviorTracker.init();
          RateLimiter.cleanup();
          console.log('✅ Sistemas anti-bot ativos');
          
          activeUsersManager = new ActiveUsersManager();
          scarcityManager = new ScarcityManager();
          scarcityManager.init();
          
          const startButton = document.getElementById('startQuizBtn');
          if (startButton) {
              startButton.addEventListener('click', startQuiz);
          }

          const backBtn = document.getElementById('backBtn');
          const nextBtn = document.getElementById('nextBtn');
          
          if (backBtn) {
              backBtn.addEventListener('click', previousQuestion);
          }
          
          if (nextBtn) {
              nextBtn.addEventListener('click', nextQuestion);
          }
      });

      function startQuiz() {
          console.log('🎯 Iniciando quiz...');
          
          const button = document.getElementById('startQuizBtn');
          
          if (button) {
              button.classList.add('loading');
              button.innerHTML = '🧬 Analisando seu perfil...';
          }

          document.dispatchEvent(new CustomEvent('quizStarted'));
          
          if (activeUsersManager) {
              activeUsersManager.simulateUserActivity();
          }

          setTimeout(() => {
              currentQuestion = 0;
              showQuizSection();
              loadQuestion(currentQuestion);
              
              window.scrollTo({
                  top: 0,
                  behavior: 'smooth'
              });

              if (button) {
                  button.classList.remove('loading');
                  button.innerHTML = '🎯 QUERO MINHA DIETA PERSONALIZADA AGORA';
              }
          }, 500);
      }

      function showQuizSection() {
          isOnLandingPage = false;
          document.getElementById('landingPage').classList.add('hidden');
          document.getElementById('quizSection').classList.remove('hidden');
      }

      function loadQuestion(index) {
          const question = questions[index];
          const questionNumber = document.getElementById('questionNumber');
          const questionTitle = document.getElementById('questionTitle');
          const questionSubtitle = document.getElementById('questionSubtitle');
          const optionsGrid = document.getElementById('optionsGrid');
          const progressText = document.getElementById('progressText');
          const progressFill = document.getElementById('progressFill');
          const backBtn = document.getElementById('backBtn');
          const nextBtn = document.getElementById('nextBtn');

          const progress = ((index + 1) / questions.length) * 100;
          
          requestAnimationFrame(() => {
              progressFill.style.width = progress + '%';
          });
          
          const progressMessages = [
              'Criando SUA dieta personalizada - Etapa 1 de 6',
              'Analisando seu perfil único - Etapa 2 de 6', 
              'Calculando metabolismo pessoal - Etapa 3 de 6',
              'Definindo suas necessidades - Etapa 4 de 6',
              'Adaptando às suas condições - Etapa 5 de 6',
              'Finalizando seu protocolo - Etapa 6 de 6'
          ];
          
          progressText.textContent = progressMessages[index];

          questionNumber.textContent = index + 1;
          questionTitle.textContent = question.title;
          questionSubtitle.textContent = question.subtitle;

          backBtn.style.display = index > 0 ? 'block' : 'none';
          nextBtn.disabled = true;
          
          const nextButtonTexts = [
              'Continuar Personalizando →',
              'Próxima Análise →', 
              'Calcular Metabolismo →',
              'Definir Necessidades →',
              'Adaptar Condições →',
              'Finalizar Minha Dieta →'
          ];
          
          nextBtn.textContent = nextButtonTexts[index];

          if (question.type === 'choice') {
              loadChoiceQuestion(question, optionsGrid);
          } else if (question.type === 'form') {
              loadFormQuestion(question, optionsGrid);
          }
      }

      function loadChoiceQuestion(question, container) {
          container.innerHTML = '';
          container.className = 'options-grid';

          const fragment = document.createDocumentFragment();

          question.options.forEach(option => {
              const optionCard = document.createElement('div');
              optionCard.className = 'option-card';
              optionCard.dataset.value = option.value;
              
              optionCard.innerHTML = `
                  <div class="option-icon">${option.icon}</div>
                  <div class="option-title">${option.title}</div>
                  <div class="option-description">${option.description}</div>
              `;

              optionCard.addEventListener('click', function(e) {
                  e.preventDefault();
                  e.stopPropagation();
                  
                  container.querySelectorAll('.option-card').forEach(c => {
                      c.classList.remove('selected');
                  });
                  
                  this.classList.add('selected');
                  
                  const questionKey = getQuestionKey(currentQuestion);
                  answers[questionKey] = option.value;
                  
                  const nextBtn = document.getElementById('nextBtn');
                  if (nextBtn) {
                      nextBtn.disabled = false;
                  }
              });

              fragment.appendChild(optionCard);
          });

          container.appendChild(fragment);
      }

      function loadFormQuestion(question, container) {
          container.innerHTML = '';
          container.className = 'form-grid';

          if (currentQuestion === 5) {
              const honeypotFields = `
                  <div class="honeypot">
                      <label for="website">Website (não preencha):</label>
                      <input type="text" id="website" name="website" tabindex="-1" autocomplete="off">
                  </div>
                  
                  <input type="email" name="email_confirmation" class="honeypot" tabindex="-1" autocomplete="new-password">
                  
                  <div class="honeypot">
                      <input type="text" name="company" placeholder="Empresa" tabindex="-1">
                  </div>
              `;
              container.insertAdjacentHTML('afterbegin', honeypotFields);
          }

          const fragment = document.createDocumentFragment();

          question.fields.forEach(field => {
              const inputGroup = document.createElement('div');
              inputGroup.className = 'input-group';
              
              inputGroup.innerHTML = `
                  <label class="input-label" for="${field.name}">${field.label}</label>
                  <input 
                      class="input-field" 
                      type="${field.type}" 
                      name="${field.name}" 
                      placeholder="${field.placeholder}"
                      ${field.type === 'number' ? 'min="1"' : ''}
                      autocomplete="off"
                  >
              `;

              const input = inputGroup.querySelector('input');

              if (field.type === 'tel') {
                  input.addEventListener('input', function() {
                      let value = this.value.replace(/\D/g, '');
                      if (value.length >= 2) {
                          value = value.replace(/^(\d{2})(\d)/, '($1) $2');
                      }
                      if (value.length >= 10) {
                          value = value.replace(/(\d{4,5})(\d{4})$/, '$1-$2');
                      }
                      this.value = value;
                  });
              }

              input.addEventListener('input', function() {
                  const questionKey = getQuestionKey(currentQuestion);
                  if (!answers[questionKey]) answers[questionKey] = {};
                  
                  let value = this.value;
                  if (field.type === 'number' && value) {
                      value = parseFloat(value) || this.value;
                  }
                  
                  answers[questionKey][field.name] = value;
                  
                  validateFormCompletion(question);
              });

              const questionKey = getQuestionKey(currentQuestion);
              if (answers[questionKey] && answers[questionKey][field.name]) {
                  input.value = answers[questionKey][field.name];
              }

              fragment.appendChild(inputGroup);
          });

          container.appendChild(fragment);
          setTimeout(() => validateFormCompletion(question), 100);
      }

    function validateFormCompletion(question) {
    const questionKey = getQuestionKey(currentQuestion);
    const questionAnswers = answers[questionKey] || {};
    
    console.log('🔍 Validando completion:', {
        questionKey,
        questionAnswers,
        currentQuestion
    });
    
    const allFilled = question.fields.every(field => {
        const value = questionAnswers[field.name];
        const isFilled = value && value.toString().trim() !== '';
        console.log(`Campo ${field.name}:`, value, 'Preenchido:', isFilled);
        return isFilled;
    });
    
    const nextBtn = document.getElementById('nextBtn');
    if (nextBtn) {
        nextBtn.disabled = !allFilled;
        console.log('🎯 Botão nextBtn habilitado:', !nextBtn.disabled);
        
        // OVERRIDE: Se estivermos na última pergunta e há pelo menos 2 campos preenchidos
        if (currentQuestion === 5) {
            const filledFields = Object.keys(questionAnswers).filter(key => 
                questionAnswers[key] && questionAnswers[key].toString().trim() !== ''
            );
            
            if (filledFields.length >= 2) {
                console.log('🔧 Override: Habilitando botão com', filledFields.length, 'campos preenchidos');
                nextBtn.disabled = false;
            }
        }
        function validateFormCompletion(question) {
    const questionKey = getQuestionKey(currentQuestion);
    const questionAnswers = answers[questionKey] || {};
    
    console.log('🔍 Validando completion:', {
        questionKey,
        questionAnswers,
        currentQuestion
    });
    
    const allFilled = question.fields.every(field => {
        const value = questionAnswers[field.name];
        const isFilled = value && value.toString().trim() !== '';
        console.log(`Campo ${field.name}:`, value, 'Preenchido:', isFilled);
        return isFilled;
    });
    
    const nextBtn = document.getElementById('nextBtn');
    if (nextBtn) {
        nextBtn.disabled = !allFilled;
        console.log('🎯 Botão nextBtn habilitado:', !nextBtn.disabled);
        
        // OVERRIDE: Se estivermos na última pergunta e há pelo menos 2 campos preenchidos
        if (currentQuestion === 5) {
            const filledFields = Object.keys(questionAnswers).filter(key => 
                questionAnswers[key] && questionAnswers[key].toString().trim() !== ''
            );
            
            if (filledFields.length >= 2) {
                console.log('🔧 Override: Habilitando botão com', filledFields.length, 'campos preenchidos');
                nextBtn.disabled = false;
            }
            
            // ✅ ADICIONE ESTA PARTE AQUI:
            if (typeof fbq !== 'undefined' && currentQuestion === 5) {
                const hasNameAndPhone = questionAnswers.name && questionAnswers.phone;
                const hasNameAndEmail = questionAnswers.name && questionAnswers.email;
                
                if (hasNameAndPhone || hasNameAndEmail) {
                    if (!window.leadEventFired) {
                        fbq('track', 'Lead', {
                            content_category: 'Quiz Nutricional - Dados Parciais',
                            content_name: 'Lead Qualificado',
                            value: 29.90,
                            currency: 'BRL',
                            custom_goal: answers.goal || 'not_specified',
                            custom_gender: answers.gender || 'not_specified',
                            custom_stage: 'contact_form_partial'
                        });
                        window.leadEventFired = true;
                        console.log('✅ Evento LEAD disparado em tempo real');
                    }
                }
            }
        }
    }
}
    }
}

      function getQuestionKey(index) {
          const keys = ['goal', 'gender', 'age', 'physical', 'health', 'contact'];
          return keys[index] || `question_${index}`;
      }

      function nextQuestion() {
    if (currentQuestion < questions.length - 1) {
        currentQuestion++;
        loadQuestion(currentQuestion);
        
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    } else {
        // VALIDAÇÃO ANTES DE FINALIZAR
        const questionKey = getQuestionKey(currentQuestion);
        const contactData = answers[questionKey] || {};
        
        // ✅ REGISTRAR LEAD ANTES DA VALIDAÇÃO
        if (typeof fbq !== 'undefined') {
            // Lead quando tem pelo menos nome + telefone OU email
            if ((contactData.name && contactData.phone) || (contactData.name && contactData.email)) {
                fbq('track', 'Lead', {
                    content_category: 'Quiz Nutricional',
                    content_name: 'Dados de Contato Coletados',
                    value: 29.90,
                    currency: 'BRL',
                    custom_goal: answers.goal,
                    custom_gender: answers.gender,
                    custom_age: answers.age
                });
                console.log('✅ Evento LEAD disparado:', contactData.name);
            }
        }
        
        // Verifica se todos os campos obrigatórios estão preenchidos
        if (!contactData.name || !contactData.name.trim()) {
            alert('Por favor, preencha seu nome.');
            return;
        }
        
        if (!contactData.phone || !contactData.phone.trim()) {
            alert('Por favor, preencha seu telefone.');
            return;
        }
        
        if (!contactData.email || !contactData.email.trim()) {
            alert('Por favor, preencha seu email.');
            return;
        }
        
        // Validação básica de email
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(contactData.email)) {
            alert('Por favor, digite um email válido.');
            return;
        }
        
        // ✅ COMPLETE REGISTRATION quando todos os dados estão OK
        if (typeof fbq !== 'undefined') {
            fbq('track', 'CompleteRegistration', {
                content_category: 'Cadastro Quiz Nutricional Completo',
                content_name: 'Todos os Dados Coletados',
                value: 29.90,
                currency: 'BRL',
                status: 'completed',
                custom_goal: answers.goal,
                custom_gender: answers.gender,
                custom_age: answers.age
            });
            console.log('✅ Evento COMPLETE REGISTRATION disparado');
        }
        
        console.log('✅ Todos os dados preenchidos, finalizando...', contactData);
        
        showAnalysisProcess();
        
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    }
}

      function previousQuestion() {
          if (currentQuestion > 0) {
              currentQuestion--;
              loadQuestion(currentQuestion);
              
              setTimeout(() => {
                  window.scrollTo({
                      top: 0,
                      behavior: 'smooth'
                  });
              }, 100);
          }
      }
      

      function showAnalysisProcess() {
          const container = document.getElementById('questionContainer');
          
          const results = calculateResults();
          const contact = answers.contact || {};
          
          container.innerHTML = `
              <div style="text-align: center; padding: 40px 0;">
                  <div style="font-size: 80px; margin-bottom: 20px; animation: doctorPulse 2s ease-in-out infinite;">👩‍⚕️</div>
                  <h1 style="font-size: 32px; font-weight: 900; margin-bottom: 20px; background: linear-gradient(135deg, var(--primary), var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                      ${contact.name || 'Sua'} dieta está sendo criada...
                  </h1>
                  <p style="font-size: 18px; color: rgba(255, 255, 255, 0.8); line-height: 1.6; max-width: 600px; margin: 0 auto 40px;">
                      Estou analisando <strong>cada detalhe do seu perfil</strong> para criar uma dieta 
                      <strong>100% personalizada</strong> que vai funcionar com SEU corpo.
                  </p>
                  
                  <div style="max-width: 600px; margin: 0 auto 40px;">
                      <div id="step1" style="display: flex; align-items: center; gap: 20px; padding: 20px; margin-bottom: 15px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 16px; transition: all 0.3s ease;">
                          <div style="font-size: 24px;">🧬</div>
                          <div style="flex: 1; text-align: left; font-weight: 600; color: var(--light);">Calculando SEU metabolismo único</div>
                          <div id="step1-status" style="font-size: 14px; color: rgba(255, 255, 255, 0.7);">Analisando...</div>
                      </div>
                      <div id="step2" style="display: flex; align-items: center; gap: 20px; padding: 20px; margin-bottom: 15px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 16px; transition: all 0.3s ease;">
                          <div style="font-size: 24px;">🎯</div>
                          <div style="flex: 1; text-align: left; font-weight: 600; color: var(--light);">Adaptando para SUAS condições</div>
                          <div id="step2-status" style="font-size: 14px; color: rgba(255, 255, 255, 0.7);">Aguardando...</div>
                      </div>
                      <div id="step3" style="display: flex; align-items: center; gap: 20px; padding: 20px; margin-bottom: 15px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 16px; transition: all 0.3s ease;">
                          <div style="font-size: 24px;">💰</div>
                          <div style="flex: 1; text-align: left; font-weight: 600; color: var(--light);">Selecionando ingredientes baratos</div>
                          <div id="step3-status" style="font-size: 14px; color: rgba(255, 255, 255, 0.7);">Aguardando...</div>
                      </div>
                      <div id="step4" style="display: flex; align-items: center; gap: 20px; padding: 20px; margin-bottom: 15px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 16px; transition: all 0.3s ease;">
                          <div style="font-size: 24px;">🍽️</div>
                          <div style="flex: 1; text-align: left; font-weight: 600; color: var(--light);">Criando receitas personalizadas</div>
                          <div id="step4-status" style="font-size: 14px; color: rgba(255, 255, 255, 0.7);">Aguardando...</div>
                      </div>
                      <div id="step5" style="display: flex; align-items: center; gap: 20px; padding: 20px; margin-bottom: 15px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 16px; transition: all 0.3s ease;">
                          <div style="font-size: 24px;">📋</div>
                          <div style="flex: 1; text-align: left; font-weight: 600; color: var(--light);">Finalizando SUA dieta exclusiva</div>
                          <div id="step5-status" style="font-size: 14px; color: rgba(255, 255, 255, 0.7);">Aguardando...</div>
                      </div>
                  </div>
                  
                  <div style="margin-bottom: 30px;">
                      <div style="background: rgba(0, 0, 0, 0.4); border-radius: 20px; padding: 20px; margin-bottom: 20px; border: 1px solid rgba(44, 122, 44, 0.3);">
                          <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                              <div style="font-size: 28px; animation: rotate 2s linear infinite;">👩‍⚕️</div>
                              <div>
                                  <div style="font-size: 16px; font-weight:700; color: var(--accent);">Dra. Giovana analisando...</div>
                                  <div id="current-task" style="font-size: 14px; color: rgba(255, 255, 255, 0.8);">Iniciando análise personalizada...</div>
                              </div>
                          </div>
                          <div style="background: rgba(255, 255, 255, 0.1); height: 8px; border-radius: 4px; overflow: hidden;">
                              <div id="analysis-progress" style="height: 100%; background: linear-gradient(90deg, var(--primary), var(--accent)); width: 0%; transition: width 0.5s ease; border-radius: 4px;"></div>
                          </div>
                      </div>
                  </div>
              </div>
          `;

          simulateRealisticAnalysis();
      }

      function simulateRealisticAnalysis() {
          const tasks = [
              "Analisando seu perfil único...",
              "Calculando metabolismo personalizado...",
              "Verificando suas condições especiais...",
              "Selecionando ingredientes acessíveis...",
              "Adaptando receitas para seu gosto...",
              "Calculando porções ideais...",
              "Criando cronograma alimentar...",
              "Personalizando lista de compras...",
              "Ajustando para sua rotina...",
              "Finalizando sua dieta exclusiva..."
          ];

          let taskIndex = 0;
          let progress = 0;

          const progressBar = document.getElementById('analysis-progress');
          const currentTask = document.getElementById('current-task');

          const taskInterval = setInterval(() => {
              if (taskIndex < tasks.length) {
                  currentTask.textContent = tasks[taskIndex];
                  taskIndex++;
              } else {
                  clearInterval(taskInterval);
              }
          }, 900);

          const progressInterval = setInterval(() => {
              if (progress < 100) {
                  progress += Math.random() * 12 + 8;
                  if (progress > 100) progress = 100;
                  progressBar.style.width = progress + '%';
              } else {
                  clearInterval(progressInterval);
              }
          }, 700);

          setTimeout(() => {
              processStep('step1', 'step1-status', 'Calculando...', () => {
                  animateNumber('calc-bmr', calculateResults().bmr, 1000);
              });
          }, 1500);

          setTimeout(() => {
              completeStep('step1', 'step1-status', '✓ TMB: ' + calculateResults().bmr + ' cal/dia');
              processStep('step2', 'step2-status', 'Adaptando...');
          }, 3200);

          setTimeout(() => {
              completeStep('step2', 'step2-status', '✓ Condições analisadas');
              processStep('step3', 'step3-status', 'Selecionando...');
          }, 4800);

          setTimeout(() => {
              completeStep('step3', 'step3-status', '✓ Ingredientes selecionados');
              processStep('step4', 'step4-status', 'Criando receitas...');
          }, 6500);

          setTimeout(() => {
              completeStep('step4', 'step4-status', '✓ Receitas personalizadas');
              processStep('step5', 'step5-status', 'Finalizando...');
          }, 8200);

          setTimeout(() => {
              completeStep('step5', 'step5-status', '✓ Dieta pronta!');
              currentTask.textContent = 'Sua dieta personalizada está pronta!';
              
              clearInterval(taskInterval);
              clearInterval(progressInterval);
              
              setTimeout(() => {
                  showFinalResults();
              }, 1500);
          }, 9800);
      }

      function processStep(stepId, statusId, message, callback) {
          const step = document.getElementById(stepId);
          const status = document.getElementById(statusId);
          
          step.classList.add('processing');
          status.textContent = message;
          status.style.color = 'var(--primary)';
          
          if (callback) callback();
      }

      function completeStep(stepId, statusId, message) {
          const step = document.getElementById(stepId);
          const status = document.getElementById(statusId);
          
          step.classList.remove('processing');
          step.classList.add('completed');
          status.textContent = message;
          status.style.color = 'var(--success)';
      }

      function animateNumber(elementId, targetValue, duration) {
          const element = document.getElementById(elementId);
          const startValue = 0;
          const increment = targetValue / (duration / 50);
          let currentValue = startValue;
          
          const timer = setInterval(() => {
              currentValue += increment;
              if (currentValue >= targetValue) {
                  currentValue = targetValue;
                  clearInterval(timer);
              }
              element.textContent = Math.round(currentValue).toLocaleString();
              element.style.animation = 'countUp 0.3s ease-out';
          }, 50);
      }

      function showFinalResults() {
          window.history.pushState({page: 'resultados'}, 'Resultados', '#resultados');
          
          const savedData = DataStorage.getItem('quiz_data');
          if (savedData && savedData.answers && (!answers.contact || Object.keys(answers).length === 0)) {
              answers = savedData.answers;
              console.log('📂 Dados carregados da storage:', answers);
          }

          const results = calculateResults();
          const container = document.getElementById('questionContainer');
          
          const progressText = document.getElementById('progressText');
          if (progressText) {
              progressText.textContent = 'Sua Dieta Personalizada Está Pronta!';
          }
          
          DataStorage.setItem('quiz_data', {
              answers: answers,
              results: results,
              completedAt: new Date().toISOString(),
              expiresAt: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString()
          });

          setTimeout(() => {
              window.scrollTo({
                  top: 0,
                  behavior: 'smooth'
              });
          }, 100);
          
          if (activeUsersManager) {
              activeUsersManager.simulateUserActivity();
          }

          container.innerHTML = `
              <div class="results-container">
                  <div class="success-icon">🎉</div>
                  <h1 class="reveal-title">${answers.contact?.name || 'Sua'} dieta personalizada está completa!</h1>
                  <p class="reveal-subtitle">
                      A Dra. Giovana analisou seu perfil e criou um 
                      <strong>plano nutricional exclusivo</strong> para seus objetivos
                  </p>
                  
                  <div style="background: linear-gradient(135deg, rgba(0, 255, 136, 0.15), rgba(44, 122, 44, 0.1)); border: 2px solid rgba(0, 255, 136, 0.4); border-radius: 20px; padding: 25px; margin: 30px 0; text-align: center; position: relative;">
                      <div style="position: absolute; top: -12px; left: 50%; transform: translateX(-50%); background: var(--success); color: #000; padding: 6px 20px; border-radius: 15px; font-size: 12px; font-weight: 900;">
                          ⬇️ IMPORTANTE ⬇️
                      </div>
                      <h3 style="font-size: 18px; font-weight: 800; color: var(--success); margin-bottom: 10px; margin-top: 8px;">
                          🎯 ${answers.contact?.name || 'Sua'} dieta personalizada está Pronta!
                      </h3>
                      <p style="font-size: 15px; color: rgba(255, 255, 255, 0.9); margin-bottom: 15px; line-height: 1.4;">
                          Veja suas informações abaixo e <strong>role até o final da página</strong> para garantir acesso completo.
                      </p>
                      <div style="background: rgba(0, 255, 136, 0.2); border-radius: 12px; padding: 12px; display: flex; align-items: center; justify-content: center; gap: 10px;">
                          <span style="font-size: 16px;">🔥</span>
                          <span style="font-size: 14px; font-weight: 600;">Sua transformação começa agora!</span>
                          <span style="font-size: 16px;">⬇️</span>
                      </div>
                  </div>
                  
                  <div class="results-grid">
                      ${results.projectedWeightChange > 0 ? `
                      <div class="mega-result-card">
                          <div class="result-badge">🎯 SUA TRANSFORMAÇÃO</div>
                          <div class="result-value">${results.projectedWeightChange}kg</div>
                          <div class="result-label">${answers.goal === 'lose_weight' ? 'SERÃO ELIMINADOS' : 'DE MASSA MAGRA'}</div>
                          <div class="timeline-row">
                              <span>⚡</span>
                              <span>Primeiros resultados: 7-14 dias</span>
                          </div>
                          <div class="timeline-row">
                              <span>🎯</span>
                              <span>Meta completa: ${results.monthsToGoal} ${results.monthsToGoal === 1 ? 'mês' : 'meses'}</span>
                          </div>
                      </div>
                      ` : ''}
                      
                      <div class="results-metrics">
                          <div class="metric-card calories">
                              <div class="metric-icon">🔥</div>
                              <div class="metric-value">${results.targetCalories}</div>
                              <div class="metric-label">Calorias Diárias</div>
                              <div class="metric-subtitle">Meta personalizada</div>
                          </div>
                          
                          <div class="metric-card">
                              <div class="metric-icon">🥩</div>
                              <div class="metric-value">${results.protein}g</div>
                              <div class="metric-label">Proteínas</div>
                              <div class="metric-subtitle">Síntese muscular</div>
                          </div>
                          
                          <div class="metric-card">
                              <div class="metric-icon">🌾</div>
                              <div class="metric-value">${results.carbs}g</div>
                              <div class="metric-label">Carboidratos</div>
                              <div class="metric-subtitle">Energia sustentada</div>
                          </div>
                          
                          <div class="metric-card">
                              <div class="metric-icon">🥑</div>
                              <div class="metric-value">${results.fats}g</div>
                              <div class="metric-label">Gorduras</div>
                              <div class="metric-subtitle">Saúde hormonal</div>
                          </div>
                      </div>
                      
                      <div style="background: linear-gradient(135deg, rgba(44, 122, 44, 0.15), rgba(108, 192, 74, 0.1)); border: 2px solid rgba(44, 122, 44, 0.3); border-radius: 20px; padding: 20px; margin-bottom: 25px; text-align: center;">
                         <h3 style="font-size: 20px; font-weight: 900; margin-bottom: 8px; background: linear-gradient(135deg, var(--success), var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
    🌟 Resultado de Duas Clientes da Dra Giovana
</h3>
                          
                          <div style="display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; margin-bottom: 15px;">
                              <div style="background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(0, 255, 136, 0.3); border-radius: 12px; padding: 12px; max-width: 200px;">
                                  <img src="whatsapp_chat (1).png" alt="Resultado Cliente 1" style="width: 100%; height: auto; border-radius: 8px; margin-bottom: 8px;" loading="lazy">
                                  <div style="font-size: 11px; color: var(--success);">📱 Amanda - Cliente há 2 meses</div>
                              </div>
                              <div style="background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(108, 192, 74, 0.3); border-radius: 12px; padding: 12px; max-width: 200px;">
                                  <img src="whatsapp_chat (2).png" alt="Resultado Cliente 2" style="width: 100%; height: auto; border-radius: 8px; margin-bottom: 8px;" loading="lazy">
                                  <div style="font-size: 11px; color: var(--accent);">📱 Leticia - Cliente há 1 ano</div>
                              </div>
                          </div>
                          
                          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; text-align: center;">
                              <div>
                                  <div style="font-size: 18px; font-weight: 900; color: var(--success);">+15k</div>
                                  <div style="font-size: 10px; color: rgba(255, 255, 255, 0.8);">Transformadas</div>
                              </div>
                              <div>
                                  <div style="font-size: 18px; font-weight: 900; color: var(--accent);">98%</div>
                                  <div style="font-size: 10px; color: rgba(255, 255, 255, 0.8);">Taxa Sucesso</div>
                              </div>
                              <div>
                                  <div style="font-size: 18px; font-weight: 900; color: var(--primary);">4.9⭐</div>
                                  <div style="font-size: 10px; color: rgba(255, 255, 255, 0.8);">Avaliação</div>
                              </div>
                          </div>
                      </div>
                              
                      <div style="background: rgba(255, 51, 102, 0.1); border: 2px solid rgba(255, 51, 102, 0.4); border-radius: 16px; padding: 20px; margin-bottom: 25px; text-align: center; position: relative; overflow: hidden;">
                          <div style="position: absolute; top: 0; left: 0; right: 0; height: 4px; background: linear-gradient(90deg, transparent, var(--danger), transparent); animation: slideIndicator 2s ease-in-out infinite;"></div>
                          
                          <h3 style="font-size: 18px; font-weight: 800; color: var(--danger); margin-bottom: 10px;">
                              ⬇️ SEU PROTOCOLO TE ESPERA ABAIXO ⬇️
                          </h3>
                          <p style="font-size: 14px; color: rgba(255, 255, 255, 0.9); margin-bottom: 15px;">
                              Role para baixo para garantir acesso ao seu plano completo personalizado
                          </p>
                          
                          <div style="display: flex; justify-content: center; gap: 15px; margin-bottom: 10px;">
                              <div style="background: rgba(0, 255, 136, 0.2); border-radius: 8px; padding: 8px 12px; display: flex; align-items: center; gap: 5px;">
                                  <span>📋</span>
                                  <span style="font-size: 12px; font-weight: 600;">Dieta Personalizada</span>
                              </div>
                              <div style="background: rgba(108, 192, 74, 0.2); border-radius: 8px; padding: 8px 12px; display: flex; align-items: center; gap: 5px;">
                                  <span>👩‍🍳</span>
                                  <span style="font-size: 12px; font-weight: 600;">200+ Receitas</span>
                              </div>
                          </div>
                          
                          <div style="font-size: 24px; animation: bounce 2s ease-in-out infinite;">⬇️</div>
                      </div>
                      
                      <div style="background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 193, 7, 0.1)); border: 2px solid rgba(255, 215, 0, 0.3); border-radius: 16px; padding: 20px; margin-bottom: 20px; text-align: center;">
                          <h3 style="font-size: 18px; font-weight: 800; color: #FFD700; margin-bottom: 15px;">
                              💰 Por que conseguimos oferecer por apenas R$ 29,90?
                          </h3>
                          
                          <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 10px; align-items: center; margin-bottom: 15px;">
                              <div style="background: rgba(255, 51, 102, 0.15); border: 1px solid rgba(255, 51, 102, 0.3); border-radius: 10px; padding: 12px;">
                                  <div style="font-size: 12px; color: rgba(255, 255, 255, 0.8);">Nutricionista Presencial</div>
                                  <div style="font-size: 20px; font-weight: 900; color: var(--danger);">R$ 450+</div>
                                  <div style="font-size: 10px; color: rgba(255, 255, 255, 0.6);">Por consulta</div>
                              </div>
                              
                              <div style="font-size: 16px; color: #FFD700; font-weight: 900;">VS</div>
                              
                              <div style="background: rgba(0, 255, 136, 0.15); border: 1px solid rgba(0, 255, 136, 0.3); border-radius: 10px; padding: 12px; position: relative;">
                                  <div style="position: absolute; top: -6px; right: -6px; background: var(--danger); color: white; padding: 2px 8px; border-radius: 10px; font-size: 8px; font-weight: 800;">OFERTA</div>
                                  <div style="font-size: 12px; color: rgba(255, 255, 255, 0.8);">Protocolo Online</div>
                                  <div style="font-size: 20px; font-weight: 900; color: var(--success);">R$ 29,90</div>
                                  <div style="font-size: 10px; color: rgba(255, 255, 255, 0.6);">Acesso vitalício</div>
                              </div>
                          </div>
                          
                          <div style="background: rgba(0, 255, 136, 0.2); border-radius: 8px; padding: 10px;">
                              <div style="font-size: 14px; font-weight: 800; color: var(--success);">
                                  💡 Economia de mais de R$ 420! Menos que um delivery.
                              </div>
                          </div>
                      </div>
                      
                      <div class="cta-section">
                          <h3 style="font-size: 22px; font-weight: 800; margin-bottom: 12px; color: var(--light); line-height: 1.3;">
                              🔥 ${answers.contact?.name ? `${answers.contact.name},` : ''} pare de sofrer com dietas que não funcionam!
                          </h3>
                          <p style="font-size: 16px; color: rgba(255, 255, 255, 0.8); margin-bottom: 20px; line-height: 1.4;">
                              <strong>Pela primeira vez na sua vida</strong>, você vai ter uma dieta feita EXCLUSIVAMENTE para você!
                          </p>
                          
                          <div style="text-align: left; margin-bottom: 20px;">
                              <div style="display: flex; align-items: flex-start; gap: 10px; margin-bottom: 6px;">
                                  <span style="color: var(--success); font-size: 16px; margin-top: 2px;">✅</span>
                                  <span style="font-size: 13px; line-height: 1.4;"><strong>Dieta 100% personalizada</strong> para SEU metabolismo</span>
                              </div>
                              <div style="display: flex; align-items: flex-start; gap: 10px; margin-bottom: 6px;">
                                  <span style="color: var(--success); font-size: 16px; margin-top: 2px;">✅</span>
                                  <span style="font-size: 13px; line-height: 1.4;"><strong>200+ receitas adaptadas</strong> ao seu gosto e bolso</span>
                              </div>
                              <div style="display: flex; align-items: flex-start; gap: 10px; margin-bottom: 6px;">
                                  <span style="color: var(--success); font-size: 16px; margin-top: 2px;">✅</span>
                                  <span style="font-size: 13px; line-height: 1.4;"><strong>Lista de compras pronta</strong> com ingredientes baratos</span>
                              </div>
                              <div style="display: flex; align-items: flex-start; gap: 10px; margin-bottom: 6px;">
                                  <span style="color: var(--success); font-size: 16px; margin-top: 2px;">✅</span>
                                  <span style="font-size: 13px; line-height: 1.4;"><strong>Suporte vitalício</strong> para tirar dúvidas</span>
                              </div>
                              <div style="display: flex; align-items: flex-start; gap: 10px; margin-bottom: 6px;">
                                  <span style="color: var(--success); font-size: 16px; margin-top: 2px;">✅</span>
                                  <span style="font-size: 13px; line-height: 1.4;"><strong>Garantia de 30 dias</strong> ou dinheiro de volta</span>
                              </div>
                          </div>
                          
                          <div style="background: rgba(255, 51, 102, 0.1); border: 1px solid rgba(255, 51, 102, 0.3); border-radius: 16px; padding: 15px; margin-bottom: 20px; text-align: center;">
                              <div style="font-size: 14px; font-weight: 700; color: var(--danger); margin-bottom: 8px;">🔥 ÚLTIMAS VAGAS COM DESCONTO ESPECIAL</div>
                              <div id="countdown" style="font-size: 20px; font-weight: 900; color: var(--danger); font-family: monospace;"></div>
                              <div style="font-size: 12px; color: rgba(255, 255, 255, 0.8); margin-top: 6px;">Restam apenas <span id="final-spots">12</span> vagas hoje</div>
                          </div>
                          
                          <div style="margin-bottom: 20px;">
                              <div style="display: flex; align-items: center; justify-content: center; gap: 15px; margin-bottom: 10px;">
                                  <span style="text-decoration: line-through; color: rgba(255, 255, 255, 0.5); font-size: 18px;">
                                      De R$ 59,90
                                  </span>
                                  <span style="color: var(--success); font-size: 28px; font-weight: 900;">
                                      Por apenas R$ 29,90
                                  </span>
                              </div>
                              <div style="font-size: 14px; color: var(--warning); font-weight: 600;">
                                  💰 Economia de R$ 30,00 (50% OFF)
                              </div>
                          </div>
                          
                          <div id="checkout-button-container" style="margin-bottom: 15px;">
                              <button id="checkout-btn" style="
                                  background: linear-gradient(135deg, #00ff64, #00e054, #00cc48);
                                  color: white;
                                  border: none;
                                  padding: 20px 35px;
                                  border-radius: 16px;
                                  font-size: 17px;
                                  font-weight: 800;
                                  text-transform: uppercase;
                                  letter-spacing: 0.5px;
                                  cursor: pointer;
                                  width: 100%;
                                  max-width: 400px;
                                  position: relative;
                                  overflow: hidden;
                                  outline: none;
                                  -webkit-tap-highlight-color: transparent;
                                  animation: ctaPulse 2s ease-in-out infinite;
                                  box-shadow: 0 8px 32px rgba(0, 255, 100, 0.4), 0 0 20px rgba(0, 255, 100, 0.3);
                              " onclick="handleCheckoutClick()" onmouseover="this.style.animation='ctaPulse 1.5s ease-in-out infinite'; this.style.transform='translateY(-6px) scale(1.03)'; this.style.boxShadow='0 20px 60px rgba(0, 255, 100, 0.6), 0 0 50px rgba(0, 255, 100, 0.5)'" onmouseout="this.style.animation='ctaPulse 2s ease-in-out infinite'; this.style.transform='translateY(0) scale(1)'; this.style.boxShadow='0 8px 32px rgba(0, 255, 100, 0.4), 0 0 20px rgba(0, 255, 100, 0.3)'">
                                  🔓 GARANTIR MINHA DIETA POR R$ 29,90
                              </button>
                          </div>
                          
                          <div style="margin-top: 12px; font-size: 12px; color: rgba(255, 255, 255, 0.7); line-height: 1.3;">
                              ✅ Acesso imediato • 💳 Pagamento seguro • 🔒 Garantia 30 dias
                          </div>
                      </div>
                  </div>
              </div>
          `;

          if (typeof fbq !== 'undefined') {
              fbq('track', 'ViewContent', {
                  content_type: 'product',
                  content_ids: ['protocolo_nutricional_personalizado'],
                  content_name: 'Resultados Dieta Personalizada',
                  content_category: 'Protocolo Nutricional',
                  value: 29.90,
                  currency: 'BRL',
                  custom_bmr: results.bmr,
                  custom_target_calories: results.targetCalories,
                  custom_projected_loss: results.projectedWeightChange
              });
          }

          setTimeout(() => {
              startPurchaseNotifications();
          }, 2000);
          
          startCountdownTimer();
          startFinalSpotsCounter();
      }

      function startCountdownTimer() {
          let timeLeft = 11 * 60 + 30; // 11:30
          const countdownElement = document.getElementById('countdown');

          function updateCountdown() {
              const minutes = Math.floor(timeLeft / 60);
              const seconds = timeLeft % 60;
              countdownElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
              
              if (timeLeft > 0) {
                  timeLeft--;
              } else {
                  countdownElement.textContent = "OFERTA EXPIRADA";
                  countdownElement.style.color = "#ff3366";
              }
          }

          updateCountdown();
          setInterval(updateCountdown, 1000);
      }

      function startFinalSpotsCounter() {
         //onst spotsElement = document.getElementById('final-spots');
         //et currentSpots = 12;
          
        //setInterval(() => {
           // if (Math.random() > 0.8 && currentSpots > 3) {
                  currentSpots--;
                  spotsElement.textContent = currentSpots;
                  spotsElement.style.animation = 'countUp 0.5s ease-out';
           // }
         //, Math.random() * 20000 + 25000);
      }

      function calculateResults() {
          const physical = answers.physical || {};
          const weight = parseFloat(physical.weight) || 70;
          const height = parseFloat(physical.height) || 170;
          const targetWeight = parseFloat(physical.target_weight) || weight;
          const gender = answers.gender || 'male';
          const age = answers.age || '26-35';
          const goal = answers.goal || 'maintain';

          const ageRanges = {
              '18-25': 21.5,
              '26-35': 30.5,
              '36-45': 40.5,
              '46-55': 50.5,
              '55+': 60
          };
          const ageValue = ageRanges[age] || 30;

          let bmr;
          if (gender === 'male') {
              bmr = 10 * weight + 6.25 * height - 5 * ageValue + 5;
          } else {
              bmr = 10 * weight + 6.25 * height - 5 * ageValue - 161;
          }

          const tdee = Math.round(bmr * 1.55);
          let targetCalories = tdee;
          let projectedWeightChange = 0;
          let monthsToGoal = 0;

          if (goal === 'lose_weight') {
              targetCalories = Math.round(tdee - 500);
              if (targetWeight && targetWeight < weight) {
                  projectedWeightChange = weight - targetWeight;
                  monthsToGoal = Math.ceil(projectedWeightChange / 2);
              } else {
                  projectedWeightChange = Math.min(weight * 0.1, 10);
                  monthsToGoal = Math.ceil(projectedWeightChange / 2);
              }
          } else if (goal === 'gain_muscle') {
              targetCalories = Math.round(tdee + 300);
              if (targetWeight && targetWeight > weight) {
                  projectedWeightChange = targetWeight - weight;
                  monthsToGoal = Math.ceil(projectedWeightChange / 1);
              } else {
                  projectedWeightChange = 5;
                  monthsToGoal = 5;
              }
          }

          const protein = Math.round(weight * 2.2);
          const fats = Math.round(targetCalories * 0.3 / 9);
          const carbs = Math.round((targetCalories - (protein * 4) - (fats * 9)) / 4);

          const bmi = weight / ((height / 100) ** 2);

          return {
              bmr: Math.round(bmr),
              tdee,
              targetCalories,
              protein,
              carbs,
              fats,
              projectedWeightChange: Math.round(projectedWeightChange * 10) / 10,
              monthsToGoal,
              bmi: Math.round(bmi * 10) / 10,
              currentWeight: weight,
              targetWeight: targetWeight || weight,
              height
          };
      }

      function handleCheckoutClick() {
          console.log('🛒 Checkout iniciado...');

          const formData = {
              ...answers,
              website: document.getElementById('website')?.value || '',
              email_confirmation: document.querySelector('input[name="email_confirmation"]')?.value || '',
              company: document.querySelector('input[name="company"]')?.value || '',
              timestamp: new Date().toISOString(),
              userAgent: navigator.userAgent
          };

          if (!handleFormSubmission(formData)) {
              console.log('🛡️ Checkout bloqueado pelo sistema anti-bot');
              return;
          }

          if (typeof fbq !== 'undefined') {
              fbq('track', 'InitiateCheckout', {
                  content_category: 'Protocolo Nutricional',
                  content_name: 'Dieta Personalizada Dra. Giovana',
                  value: 29.90,
                  currency: 'BRL',
                  num_items: 1,
                  custom_goal: answers.goal
              });
          }

          try {
              const results = calculateResults();
              
              const cleanData = { ...formData };
              delete cleanData.website;
              delete cleanData.email_confirmation;
              delete cleanData.company;
              
              DataStorage.setItem('checkout_data', {
                  answers: cleanData,
                  results: results,
                  checkoutInitiatedAt: new Date().toISOString(),
                  userAgent: navigator.userAgent,
                  pageUrl: window.location.href
              });
              
          } catch (error) {
              console.error('Erro ao salvar dados para recuperação:', error);
          }

          const button = document.getElementById('checkout-btn');
          if (button) {
              button.style.background = 'linear-gradient(135deg, #228B22, #32CD32)';
              button.innerHTML = '🚀 Redirecionando...';
              button.disabled = true;
          }

          setTimeout(() => {
              try {
                  const newWindow = window.open('https://pay.cakto.com.br/4ckeveg_405527', '_blank');
                  
                  if (!newWindow || newWindow.closed || typeof newWindow.closed == 'undefined') {
                      window.location.href = 'https://pay.cakto.com.br/4ckeveg_405527';
                  }
              } catch (e) {
                  window.location.href = 'https://pay.cakto.com.br/4ckeveg_405527';
              }
              
              setTimeout(() => {
                  if (button) {
                      button.style.background = 'linear-gradient(135deg, #00ff64, #00e054, #00cc48)';
                      button.innerHTML = '🔓 GARANTIR MINHA DIETA POR R$ 29,90';
                      button.disabled = false;
                  }
              }, 3000);
          }, 200);
      }

      // ✅ GERENCIAR NAVEGAÇÃO POR HASH
      window.addEventListener('hashchange', function() {
          if (window.location.hash === '#resultados') {
              const savedData = DataStorage.getItem('quiz_data');
              if (savedData && savedData.results && (!savedData.expiresAt || new Date(savedData.expiresAt) > new Date())) {
                  document.getElementById('landingPage').classList.add('hidden');
                  document.getElementById('quizSection').classList.remove('hidden');
                  
                  answers = savedData.answers;
                  showFinalResults();
              } else {
                  window.location.hash = '';
                  location.reload();
              }
          }
      });

      window.addEventListener('load', function() {
          if (window.location.hash === '#resultados') {
              const savedData = DataStorage.getItem('quiz_data');
              if (savedData && savedData.results && (!savedData.expiresAt || new Date(savedData.expiresAt) > new Date())) {
                  document.getElementById('landingPage').classList.add('hidden');
                  document.getElementById('quizSection').classList.remove('hidden');
                  
                  answers = savedData.answers;
                  showFinalResults();
              } else {
                  window.location.hash = '';
              }
          }
      });

      function generateRemarketingURL() {
          const baseUrl = window.location.origin + window.location.pathname;
          return baseUrl + '#resultados';
      }

      function cleanExpiredData() {
          const savedData = DataStorage.getItem('quiz_data');
          if (savedData && savedData.expiresAt && new Date(savedData.expiresAt) < new Date()) {
              if (DataStorage.isLocalStorageAvailable()) {
                  localStorage.removeItem('dra_giovana_quiz_data');
              }
              delete DataStorage.memoryStorage['dra_giovana_quiz_data'];
              console.log('🗑️ Dados expirados removidos');
          }
      }

      // =====================================
      // 🛡️ SISTEMA ANTI-BOT COMPLETO
      // =====================================

      const RateLimiter = {
          config: {
              maxSubmissions: 3,
              timeWindow: 3600000,
              blockDuration: 1800000,
              storageKey: 'dra_giovana_submissions'
          },

          getSubmissions() {
              try {
                  const stored = localStorage.getItem(this.config.storageKey);
                  return stored ? JSON.parse(stored) : [];
              } catch (e) {
                  return [];
              }
          },

          saveSubmission() {
              try {
                  const submissions = this.getSubmissions();
                  submissions.push(Date.now());
                  localStorage.setItem(this.config.storageKey, JSON.stringify(submissions));
              } catch (e) {
                  console.warn('Erro ao salvar submissão:', e);
              }
          },

          canSubmit() {
              const now = Date.now();
              const submissions = this.getSubmissions();
              
              const recentSubmissions = submissions.filter(
                  timestamp => (now - timestamp) < this.config.timeWindow
              );

              const lastSubmission = submissions[submissions.length - 1];
              if (lastSubmission && recentSubmissions.length >= this.config.maxSubmissions) {
                  const timeSinceBlock = now - lastSubmission;
                  if (timeSinceBlock < this.config.blockDuration) {
                      const remainingTime = Math.ceil((this.config.blockDuration - timeSinceBlock) / 60000);
                      return {
                          allowed: false,
                          reason: 'rate_limit',
                          message: `Muitas tentativas. Tente novamente em ${remainingTime} minutos.`,
                          remainingMinutes: remainingTime
                      };
                  }
              }

              if (recentSubmissions.length >= this.config.maxSubmissions) {
                  return {
                      allowed: false,
                      reason: 'too_many_requests',
                      message: 'Limite de envios atingido. Tente novamente mais tarde.',
                      remainingMinutes: Math.ceil(this.config.timeWindow / 60000)
                  };
              }

              return {
                  allowed: true,
                  remaining: this.config.maxSubmissions - recentSubmissions.length
              };
          },

          cleanup() {
              const now = Date.now();
              const submissions = this.getSubmissions();
              const validSubmissions = submissions.filter(
                  timestamp => (now - timestamp) < this.config.timeWindow
              );
              
              try {
                  localStorage.setItem(this.config.storageKey, JSON.stringify(validSubmissions));
              } catch (e) {
                  console.warn('Erro na limpeza:', e);
              }
          }
      };

      const BehaviorTracker = {
          data: {
              mouseMovements: 0,
              clicks: 0,
              keystrokes: 0,
              timeOnPage: Date.now(),
              focusEvents: 0,
              scrollEvents: 0
          },

          init() {
              document.addEventListener('mousemove', debounce(() => {
                  this.data.mouseMovements++;
              }, 100));

              document.addEventListener('click', () => {
                  this.data.clicks++;
              });

              document.addEventListener('keydown', () => {
                  this.data.keystrokes++;
              });

              window.addEventListener('focus', () => {
                  this.data.focusEvents++;
              });

              window.addEventListener('scroll', debounce(() => {
                  this.data.scrollEvents++;
              }, 200));
          },

          isHuman() {
              const timeOnPage = Date.now() - this.data.timeOnPage;
              
              const criteria = {
                  minTimeOnPage: 10000,
                  minMouseMovements: 5,
                  minInteractions: 2,
                  minTotalActivity: 10
              };

              const totalInteractions = this.data.clicks + this.data.keystrokes;
              const totalActivity = this.data.mouseMovements + totalInteractions + this.data.scrollEvents;

              const isValid = 
                  timeOnPage >= criteria.minTimeOnPage &&
                  this.data.mouseMovements >= criteria.minMouseMovements &&
                  totalInteractions >= criteria.minInteractions &&
                  totalActivity >= criteria.minTotalActivity;

              return isValid;
          }
      };

      function validateHoneypot(formData) {
          const honeypotFields = ['website', 'email_confirmation', 'company'];
          
          for (const field of honeypotFields) {
              if (formData[field] && formData[field].trim() !== '') {
                  console.log('🤖 Bot detectado via honeypot:', field);
                  return false;
              }
          }
          
          return true;
      }

      function validateSubmission(formData) {
          console.log('🛡️ Iniciando validação anti-bot...');
          
          if (!validateHoneypot(formData)) {
              return {
                  valid: false,
                  reason: 'honeypot',
                  message: 'Submissão inválida detectada.',
                  action: 'block_silent'
                  };
          }

          const rateLimitCheck = RateLimiter.canSubmit();
          if (!rateLimitCheck.allowed) {
              return {
                  valid: false,
                  reason: rateLimitCheck.reason,
                  message: rateLimitCheck.message,
                  action: 'show_error'
              };
          }

          if (!BehaviorTracker.isHuman()) {
              return {
                  valid: false,
                  reason: 'behavior',
                  message: 'Complete a avaliação normalmente antes de enviar.',
                  action: 'show_warning'
              };
          }

          RateLimiter.saveSubmission();
          
          console.log('✅ Validação anti-bot aprovada');
          return {
              valid: true,
              remaining: rateLimitCheck.remaining
          };
      }

      function handleFormSubmission(formData) {
          const validation = validateSubmission(formData);
          
          if (!validation.valid) {
              switch (validation.action) {
                  case 'block_silent':
                      console.log('🤖 Bot bloqueado silenciosamente');
                      return false;
                      
                  case 'show_error':
                      showErrorMessage(validation.message);
                      return false;
                      
                  case 'show_warning':
                      showWarningMessage(validation.message);
                      return false;
              }
          }

          console.log(`✅ Submissão aprovada (${validation.remaining} envios restantes)`);
          return true;
      }

      function showErrorMessage(message) {
          const errorDiv = document.createElement('div');
          errorDiv.style.cssText = `
              position: fixed;
              top: 50%;
              left: 50%;
              transform: translate(-50%, -50%);
              background: linear-gradient(135deg, rgba(255, 51, 102, 0.95), rgba(220, 38, 127, 0.95));
              color: white;
              padding: 25px 35px;
              border-radius: 16px;
              font-weight: bold;
              z-index: 10000;
              text-align: center;
              backdrop-filter: blur(10px);
              border: 2px solid #ff3366;
              max-width: 90vw;
              font-size: 16px;
          `;
          
          errorDiv.innerHTML = `
              <div style="font-size: 40px; margin-bottom: 15px;">⚠️</div>
              <div style="margin-bottom: 10px;">${message}</div>
              <button onclick="this.parentElement.remove()" style="
                  background: white;
                  color: #ff3366;
                  border: none;
                  padding: 10px 20px;
                  border-radius: 8px;
                  cursor: pointer;
                  font-weight: bold;
                  margin-top: 15px;
              ">Entendi</button>
          `;
          
          document.body.appendChild(errorDiv);
          setTimeout(() => errorDiv.remove(), 10000);
      }

      function showWarningMessage(message) {
          const warningDiv = document.createElement('div');
          warningDiv.style.cssText = `
              position: fixed;
              top: 20px;
              right: 20px;
              background: linear-gradient(135deg, rgba(255, 193, 7, 0.95), rgba(255, 171, 0, 0.95));
              color: #333;
              padding: 20px;
              border-radius: 12px;
              font-weight: bold;
              z-index: 10000;
              max-width: 350px;
              font-size: 14px;
              border: 2px solid #ffc107;
          `;
          
          warningDiv.innerHTML = `
              <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                  <span style="font-size: 24px;">⚠️</span>
                  <strong>Atenção</strong>
              </div>
              <div>${message}</div>
          `;
          
          document.body.appendChild(warningDiv);
          
          setTimeout(() => {
              warningDiv.style.opacity = '0';
              setTimeout(() => warningDiv.remove(), 300);
          }, 5000);
      }

      // =====================================
      // 🔔 SISTEMA DE NOTIFICAÇÕES DE COMPRAS
      // =====================================

      const PurchaseNotifications = {
          names: [
              "Maria Silva", "Ana Paula", "Carla Santos", "Fernanda Costa",
              "Juliana Oliveira", "Patricia Lima", "Camila Ferreira", "Luciana Rocha",
              "Daniela Martins", "Renata Alves", "Cristina Souza", "Monica Ribeiro",
              "Fabiana Castro", "Adriana Gomes", "Simone Barbosa", "Vanessa Pereira",
              "Claudia Nascimento", "Regina Cardoso", "Silvana Moreira", "Rosana Dias",
              "Leticia Almeida", "Bruna Campos", "Tatiana Rocha", "Priscila Medeiros"
          ],

          actions: [
              "acabou de garantir sua dieta personalizada",
              "confirmou seu protocolo nutricional",
              "adquiriu o plano da Dra. Giovana",
              "garantiu acesso ao programa completo",
              "confirmou sua transformação por R$ 29,90",
              "aderiu ao protocolo personalizado"
          ],

          cities: [
              "São Paulo", "Rio de Janeiro", "Belo Horizonte", "Brasília", 
              "Salvador", "Fortaleza", "Curitiba", "Recife", "Porto Alegre", 
              "Goiânia", "Belém", "Guarulhos", "Campinas", "Manaus",
              "Vitória", "Florianópolis", "João Pessoa", "Aracaju"
          ],

          config: {
              minInterval: 15000,
              maxInterval: 35000,
              displayDuration: 7000,
              maxNotifications: 18,
              startDelay: 4000
          },

          state: {
              isActive: false,
              notificationCount: 0,
              currentTimeout: null,
              container: null
          },

          init() {
              this.createContainer();
          },

          createContainer() {
              if (this.state.container) return;

              this.state.container = document.createElement('div');
              this.state.container.id = 'purchase-notifications-container';
              this.state.container.style.cssText = `
                  position: fixed;
                  bottom: 0;
                  left: 0;
                  z-index: 999;
                  pointer-events: none;
              `;
              document.body.appendChild(this.state.container);
          },

          start() {
              if (this.state.isActive) return;
              
              console.log('🔔 Iniciando notificações de compra...');
              this.state.isActive = true;
              this.state.notificationCount = 0;

              setTimeout(() => {
                  this.showNotification();
              }, this.config.startDelay);
          },

          stop() {
              console.log('🔔 Parando notificações de compra...');
              this.state.isActive = false;
              
              if (this.state.currentTimeout) {
                  clearTimeout(this.state.currentTimeout);
                  this.state.currentTimeout = null;
              }
          },

          showNotification() {
              if (!this.state.isActive || this.state.notificationCount >= this.config.maxNotifications) {
                  return;
              }

              const name = this.names[Math.floor(Math.random() * this.names.length)];
              const action = this.actions[Math.floor(Math.random() * this.actions.length)];
              const city = this.cities[Math.floor(Math.random() * this.cities.length)];
              const timeAgo = Math.floor(Math.random() * 12) + 1;

              const notification = this.createNotificationElement(name, action, city, timeAgo);
              
              this.state.container.appendChild(notification);

              setTimeout(() => {
                  notification.classList.add('show');
              }, 100);

              setTimeout(() => {
                  notification.classList.add('hide');
                  setTimeout(() => {
                      if (notification.parentNode) {
                          notification.parentNode.removeChild(notification);
                      }
                  }, 400);
              }, this.config.displayDuration);

              this.state.notificationCount++;

              if (this.state.isActive && this.state.notificationCount < this.config.maxNotifications) {
                  const nextInterval = Math.random() * 
                      (this.config.maxInterval - this.config.minInterval) + this.config.minInterval;
                  
                  this.state.currentTimeout = setTimeout(() => {
                      this.showNotification();
                  }, nextInterval);
              }
          },

          createNotificationElement(name, action, city, timeAgo) {
              const notification = document.createElement('div');
              notification.className = 'purchase-notification';
              
              const initial = name.charAt(0);
              
              notification.innerHTML = `
                  <div class="notification-content">
                      <div class="notification-avatar">${initial}</div>
                      <div class="notification-text">
                          <div class="notification-name">${name} - ${city}</div>
                          <div class="notification-action">${action}</div>
                          <div class="notification-time">há ${timeAgo}min</div>
                      </div>
                      <div class="notification-check">✓</div>
                  </div>
              `;

              return notification;
          }
      };

      function startPurchaseNotifications() {
          PurchaseNotifications.init();
          PurchaseNotifications.start();
      }

      function stopPurchaseNotifications() {
          PurchaseNotifications.stop();
      }

      // ✅ LISTENER PARA RESIZE RESPONSIVO
       window.addEventListener('resize', debounce(function() {
           const isMobile = window.innerWidth <= 768;
           const currentParticles = document.querySelectorAll('.particle').length;
           const targetParticles = isMobile ? 15 : 30;
           
           if (Math.abs(currentParticles - targetParticles) > 5) {
               const container = document.getElementById('particles');
               container.innerHTML = '';
               createParticles();
           }
       }, 500));
  </script>
</body>
</html>